var Ia=Object.defineProperty;var St=e=>{throw TypeError(e)};var Aa=(e,t,a)=>t in e?Ia(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var h=(e,t,a)=>Aa(e,typeof t!="symbol"?t+"":t,a),Ve=(e,t,a)=>t.has(e)||St("Cannot "+a);var d=(e,t,a)=>(Ve(e,t,"read from private field"),a?a.call(e):t.get(e)),P=(e,t,a)=>t.has(e)?St("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,a),q=(e,t,a,i)=>(Ve(e,t,"write to private field"),i?i.call(e,a):t.set(e,a),a),b=(e,t,a)=>(Ve(e,t,"access private method"),a);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function a(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(r){if(r.ep)return;r.ep=!0;const n=a(r);fetch(r.href,n)}})();var O={};function Y(e,t=!1,a=i=>i){return()=>({__type:"event-definition",type:e,isDomainEvent:t,transformations:a})}function Ea(e,t){return{__type:"service-plugin-definition",componentType:e,methods:t}}var Bt="wix_spi_error";const _a=Object.freeze(Object.defineProperty({__proto__:null,EventDefinition:Y,SERVICE_PLUGIN_ERROR_TYPE:Bt,ServicePluginDefinition:Ea},Symbol.toStringTag,{value:"Module"})),Da=e=>{switch(e){case"get":case"GET":return"GET";case"post":case"POST":return"POST";case"put":case"PUT":return"PUT";case"delete":case"DELETE":return"DELETE";case"patch":case"PATCH":return"PATCH";case"head":case"HEAD":return"HEAD";case"options":case"OPTIONS":return"OPTIONS";default:throw new Error(`Unknown method: ${e}`)}},Ta=e=>t=>async a=>{let i;const r=n=>{if(i=e(a)(n),i.url===void 0)throw new Error("Url was not successfully created for this request, please reach out to support channels for assistance.");const{method:s,url:o,params:l}=i;return{...i,method:Da(s),url:o,data:i.data,params:l}};try{const n=await t.request(r);if(i===void 0)throw new Error("Request options were not created for this request, please reach out to support channels for assistance.");const s=Array.isArray(i.transformResponse)?i.transformResponse:[i.transformResponse];let o=n.data;return s.forEach(l=>{l&&(o=l(n.data,n.headers))}),o}catch(n){throw typeof n=="object"&&n!==null&&"response"in n&&typeof n.response=="object"&&n.response!==null&&"data"in n.response?n.response.data:n}},ba=e=>e.__isAmbassador?!0:!!e().__isAmbassador,Sa="__metadata",ge="www.wixapis.com";class Fa extends Error{constructor(a,i){super(a);h(this,"message");h(this,"response");this.message=a,this.response=i}async details(){const a=await this.response.json();return Ra(this.response.status,a==null?void 0:a.message,a==null?void 0:a.details,{requestId:this.response.headers.get("X-Wix-Request-Id"),details:a})}}const Ra=(e,t,a,i)=>({details:{...!(a!=null&&a.validationError)&&{applicationError:{description:t,code:e,data:i}},...a},message:t}),Oa=e=>e!=null&&e.method&&["post","put","patch"].includes(e.method.toLocaleLowerCase())&&e.body?{"Content-Type":"application/json"}:{},Ca=e=>e&&typeof e=="object"&&!Array.isArray(e),Na=e=>e.__type==="host";function $a(e,t){return e.create(t)}const Ua="x-wix-bi-gateway";function Ma(e,t,a){return{[Ua]:La({environment:`js-sdk${a?`-${a}`:""}`,"package-name":e.packageName??(t==null?void 0:t.PACKAGE_NAME),"method-fqn":e.methodFqn,entity:e.entityFqdn})}}function La(e){return Object.entries(e).filter(([t,a])=>!!a).map(([t,a])=>`${t}=${a}`).join(",")}function qa(e,t){return{...e,...Object.fromEntries(t.map(a=>[a,(...i)=>{const r=vt();if(!r)throw new Error("Wix context is not available. Make sure to initialize the Wix context before using SDK modules");return r.initWixModules(e)[a].apply(void 0,i)}]))}}function Wa(e,t){return(...a)=>{const i=vt();return i?i.initWixModules(e,t).apply(void 0,a):e.apply(void 0,a)}}function ka(e){const t=(...a)=>{const i=vt();return i?i.initWixModules(e).apply(void 0,a):()=>{}};return t.__type=e.__type,t.type=e.type,t.isDomainEvent=e.isDomainEvent,t.transformations=e.transformations,t}function vt(){const e=typeof $wixContext<"u"&&$wixContext.initWixModules?$wixContext.initWixModules:typeof globalThis.__wix_context__<"u"&&globalThis.__wix_context__.initWixModules?globalThis.__wix_context__.initWixModules:void 0;if(e)return{initWixModules(i,r){return ve(()=>e(i,r))},fetchWithAuth(){throw new Error("fetchWithAuth is not available in this context")},graphql(){throw new Error("graphql is not available in this context")}};const t=typeof $wixContext<"u"?$wixContext.client:typeof O.client<"u"?O.client:typeof globalThis.__wix_context__<"u"?globalThis.__wix_context__.client:void 0,a=typeof $wixContext<"u"?$wixContext.elevatedClient:typeof O.elevatedClient<"u"?O.elevatedClient:typeof globalThis.__wix_context__<"u"?globalThis.__wix_context__.elevatedClient:void 0;if(!(!t&&!a))return{initWixModules(i,r){if(r){if(!a)throw new Error("An elevated client is required to use elevated modules. Make sure to initialize the Wix context with an elevated client before using elevated SDK modules");return ve(()=>a.use(i))}if(!t)throw new Error("Wix context is not available. Make sure to initialize the Wix context before using SDK modules");return ve(()=>t.use(i))},fetchWithAuth:(i,r)=>{if(!t)throw new Error("Wix context is not available. Make sure to initialize the Wix context before using SDK modules");return t.fetchWithAuth(i,r)},async graphql(i,r,n){if(!t)throw new Error("Wix context is not available. Make sure to initialize the Wix context before using SDK modules");return t.graphql(i,r,n)}}}function ve(e){const t=globalThis.__wix_context__,a={client:O.client,elevatedClient:O.elevatedClient};let i;globalThis.__wix_context__=void 0,O.client=void 0,O.elevatedClient=void 0,typeof $wixContext<"u"&&(i={client:$wixContext==null?void 0:$wixContext.client,elevatedClient:$wixContext==null?void 0:$wixContext.elevatedClient},delete $wixContext.client,delete $wixContext.elevatedClient);try{return e()}finally{globalThis.__wix_context__=t,O.client=a.client,O.elevatedClient=a.elevatedClient,typeof $wixContext<"u"&&($wixContext.client=i.client,$wixContext.elevatedClient=i.elevatedClient)}}function ja(e,t,a,i,r,n,s){return ve(()=>e({request:async o=>{var g,m;const l=o({host:(n==null?void 0:n.HTTPHost)||ge});let c=l;c.method==="GET"&&((g=c.fallback)!=null&&g.length)&&c.params.toString().length>4e3&&(c=l.fallback[0]);let u=`https://${(n==null?void 0:n.HTTPHost)??ge}${c.url}`;c.params&&c.params.toString()&&(u+=`?${c.params.toString()}`);try{const f=Ma(l,t,s),y=await a(u,{method:c.method,...c.data&&{body:JSON.stringify(c.data)},headers:{...f}});if(y.status!==200){let v=null;try{v=await y.json()}catch{}throw Ka(y.status,v==null?void 0:v.message,v==null?void 0:v.details,{requestId:y.headers.get("X-Wix-Request-Id"),details:v})}return{data:await y.json(),headers:y.headers,status:y.status,statusText:y.statusText}}catch(f){throw(m=f.message)!=null&&m.includes("fetch is not defined")&&console.error("Node.js v18+ is required"),f}},fetchWithAuth:a,wixAPIFetch:i,getActiveToken:r}))}const Ka=(e,t,a,i)=>({response:{data:{details:{...!(a!=null&&a.validationError)&&{applicationError:{description:t,code:e,data:i}},...a},message:t},status:e}});function Gt(){return{emit(e,...t){for(let a=0,i=this.events[e]||[],r=i.length;a<r;a++)i[a](...t)},events:{},on(e,t){var a;return((a=this.events)[e]||(a[e]=[])).push(t),()=>{var i;this.events[e]=(i=this.events[e])==null?void 0:i.filter(r=>t!==r)}}}}const Ha=e=>e.__type==="event-definition";function Ft(e,t,a,i){let r;if(e.isDomainEvent){const s=a,{deletedEvent:o,actionEvent:l,createdEvent:c,updatedEvent:p,...u}=s,g={...i,...u};o?o!=null&&o.deletedEntity?r={entity:o==null?void 0:o.deletedEntity,metadata:g}:r={metadata:g}:l?r={data:l.body,metadata:g}:r={entity:(c==null?void 0:c.entity)??(p==null?void 0:p.currentEntity),metadata:g}}else r={data:a,metadata:i};const n=e.transformations??(s=>s);return t(n(r))}function Ba(e){const t=new Map,a=Gt(),i={...a,getRegisteredEvents:()=>t,async process(r,n={expectedEvents:[]}){const{eventType:s,identity:o,instanceId:l,payload:c}=await this.parseJWT(r),p=[...n.expectedEvents,...Array.from(t.keys()).map(g=>({type:g}))];if(p.length>0&&!p.some(({type:g})=>g===s))throw new Error(`Unexpected event type: ${s}. Expected one of: ${p.map(g=>g.type).join(", ")}`);const u=t.get(s)??[];return await Promise.all(u.map(({eventDefinition:g,handler:m})=>Ft(g,m,c,{instanceId:l,identity:o}))),{instanceId:l,eventType:s,payload:c,identity:o}},async processRequest(r,n){const s=await r.text();return this.process(s,n)},async parseJWT(r){if(!e.decodeJWT)throw new Error("decodeJWT is not supported by the authentication strategy");const{decoded:n,valid:s}=await e.decodeJWT(r);if(!s)throw new Error("JWT is not valid");if(typeof n.data!="string")throw new Error(`Unexpected type of JWT data: expected string, got ${typeof n.data}`);const o=JSON.parse(n.data),l=o.eventType,c=o.instanceId,p=o.identity?JSON.parse(o.identity):void 0,u=JSON.parse(o.data);return{instanceId:c,eventType:l,payload:u,identity:p}},async parseRequest(r){const n=await r.text();return this.parseJWT(n)},async executeHandlers(r){const n=Array.from(t.keys()).map(o=>({type:o}));if(n.length>0&&!n.some(({type:o})=>o===r.eventType))throw new Error(`Unexpected event type: ${r.eventType}. Expected one of: ${n.map(o=>o.type).join(", ")}`);const s=t.get(r.eventType)??[];await Promise.all(s.map(({eventDefinition:o,handler:l})=>Ft(o,l,r.payload,{instanceId:r.instanceId,identity:r.identity})))},apps:{AppInstalled:Y("AppInstalled")(),AppRemoved:Y("AppRemoved")()}};return{initModule(r){return n=>{const s=t.get(r.type)??[];s.push({eventDefinition:r,handler:n}),t.set(r.type,s),a.emit("registered",r)}},client:i}}const Ga=e=>e.__type==="service-plugin-definition";function za(e){const t=new Map,a=Gt(),i={...a,getRegisteredServicePlugins:()=>t,async parseJWT(r){if(!e.decodeJWT)throw new Error("decodeJWT is not supported by the authentication strategy");const{decoded:n,valid:s}=await e.decodeJWT(r,!0);if(!s)throw new Error("JWT is not valid");if(typeof n.data!="object"||n.data===null||!("metadata"in n.data)||typeof n.data.metadata!="object"||n.data.metadata===null||!("appExtensionType"in n.data.metadata)||typeof n.data.metadata.appExtensionType!="string")throw new Error("Unexpected JWT data: expected object with metadata.appExtensionType string");return n.data},async process(r){const n=await this.parseJWT(r.body);return this.executeHandler(n,r.url)},async parseRequest(r){const n=await r.text();return this.parseJWT(n)},async processRequest(r){const n=r.url,s=await r.text();try{const o=await this.process({url:n,body:s});return Response.json(o)}catch(o){if(o.errorType==="SPI"&&o.applicationCode&&o.httpCode)return Response.json({applicationError:{code:o.applicationCode,data:o.data}},{status:o.httpCode});throw o}},async executeHandler(r,n){const s=r.metadata.appExtensionType.toLowerCase(),o=t.get(s)??[];if(o.length===0)throw new Error(`No service plugin implementations found for component type ${s}`);if(o.length>1)throw new Error(`Multiple service plugin implementations found for component type ${s}. This is currently not supported`);const{implementation:l,servicePluginDefinition:c}=o[0],p=c.methods.find(g=>n.endsWith(g.primaryHttpMappingPath));if(!p)throw new Error("Unexpect request: request url did not match any method: "+n);const u=l[p.name];if(!u)throw new Error(`Got request for service plugin method ${p.name} but no implementation was provided. Available methods: ${Object.keys(l).join(", ")}`);return p.transformations.toREST(await u(p.transformations.fromREST(r)))}};return{initModule(r){return n=>{const s=t.get(r.componentType.toLowerCase())??[];s.push({servicePluginDefinition:r,implementation:n}),t.set(r.componentType.toLowerCase(),s),a.emit("registered",r)}},client:i}}function Ja(e){const t=e.headers||{Authorization:""},a=e.auth||{getAuthHeaders:m=>Promise.resolve({headers:{}})},i=a.getAuthHeaders.bind(void 0,e.host);a.getAuthHeaders=i;const r=async(m,f)=>{if(typeof m=="string"||m instanceof URL)return fetch(m,{...f,headers:{...f==null?void 0:f.headers,...(await i()).headers}});for(const[y,A]of Object.entries((await i()).headers))m.headers.set(y,A);return fetch(m,f)},{client:n,initModule:s}=za(a),{client:o,initModule:l}=Ba(a),c=async(m,f)=>{var v,R;const y=await i(),A=Oa(f);return fetch(m,{...f,headers:{...A,...t,...y==null?void 0:y.headers,...f==null?void 0:f.headers,...(R=(v=e.host)==null?void 0:v.essentials)==null?void 0:R.passThroughHeaders}})},p=(m,f)=>{var y,A;if(Ha(m))return l(m);if(Ga(m))return s(m);if(Na(m)&&e.host)return $a(m,e.host);if(typeof m=="function"){if("__type"in m&&m.__type===Bt)return m;const v=((y=e.host)==null?void 0:y.apiBaseUrl)??ge;return ja(ve(()=>ba(m))?Ta(m):m,f??{},c,(R,ae)=>{const L=new URL(R,`https://${v}`);return L.host=v,L.protocol="https",c(L.toString(),ae)},a.getActiveToken,{HTTPHost:v},(A=e.host)==null?void 0:A.name)}else return Ca(m)?Object.fromEntries(Object.entries(m).map(([v,R])=>[v,p(R,m[Sa])])):m},u=m=>{for(const f in m)t[f]=m[f]};return{...e.modules?p(e.modules):{},auth:a,setHeaders:u,use:p,enableContext(m,f={elevated:!1}){m==="global"?globalThis.__wix_context__!=null?f.elevated?globalThis.__wix_context__.elevatedClient=this:globalThis.__wix_context__.client=this:f.elevated?globalThis.__wix_context__={elevatedClient:this}:globalThis.__wix_context__={client:this}:f.elevated?O.elevatedClient=this:O.client=this},fetch:(m,f)=>{var v;const y=((v=e.host)==null?void 0:v.apiBaseUrl)??ge,A=new URL(m,`https://${y}`);return A.host=y,A.protocol="https",c(A.toString(),f)},fetchWithAuth:r,async graphql(m,f,y={apiVersion:"alpha"}){var L;const A=((L=e==null?void 0:e.host)==null?void 0:L.apiBaseUrl)??ge,v=await c(`https://${A}/graphql/${y.apiVersion}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:m,variables:f})});if(v.status!==200)throw new Fa(`GraphQL request failed with status ${v.status}`,v);const{data:R,errors:ae}=await v.json();return{data:R??{},errors:ae}},webhooks:o,servicePlugins:n}}const Se="wix:",Xa={_id:"id",_createdDate:"createdDate",_updatedDate:"updatedDate"},Va={id:"_id",createdDate:"_createdDate",updatedDate:"_updatedDate"};function zt(e,t,a){const i=n=>a.includes(n),r=(n,s)=>{if(Array.isArray(n))n.forEach(o=>{r(o,s)});else if(typeof n=="object"&&n!==null){const o=n;Object.keys(o).forEach(l=>{const c=s===""?l:`${s}.${l}`;i(c)||(l in t&&!(t[l]in o)&&(o[t[l]]=o[l],delete o[l]),r(o[l],c))})}};return r(e,""),e}function E(e,t=[]){return zt(e,Xa,t)}function w(e,t=[]){return zt(e,Va,t)}function Ya(e){return e==null?void 0:e.toISOString()}function F(e){return e?new Date(e):void 0}function Re(e,{path:t,isRepeated:a,isMap:i},r){const n=t.split(".");if(n.length===1&&t in e)return e[t]=a?e[t].map(r):i?Object.fromEntries(Object.entries(e[t]).map(([l,c])=>[l,r(c)])):r(e[t]),e;const[s,...o]=n;if(s.endsWith("{}")){const l=s.slice(0,-2);e[l]=Object.fromEntries(Object.entries(e[l]).map(([c,p])=>[c,Re(p,{path:o.join("."),isRepeated:a,isMap:i},r)]))}else Array.isArray(e[s])?e[s]=e[s].map(l=>Re(l,{path:o.join("."),isRepeated:a,isMap:i},r)):s in e&&typeof e[s]=="object"&&e[s]!==null&&(e[s]=Re(e[s],{path:o.join("."),isRepeated:a,isMap:i},r));return e}function x(e,t){return t.reduce((a,{paths:i,transformFn:r})=>i.reduce((n,s)=>Re(n,s,r),a),e)}function Be(e,t){const{protocol:a}=new URL(e);return a===`${t}:`?`${Se}${e}`:e}function Pt(e){return ti(e).map(t=>t.toLocaleUpperCase()).join("_")}const Qa=new RegExp("([\\p{Ll}\\d])(\\p{Lu})","gu"),Za=new RegExp("(\\p{Lu})([\\p{Lu}][\\p{Ll}])","gu"),Rt="$1\0$2",ei=/[^\p{L}\d]+/giu;function ti(e){let t=e.trim();t=t.replace(Qa,Rt).replace(Za,Rt),t=t.replace(ei,"\0");let a=0,i=t.length;for(;t.charAt(a)==="\0";)a++;if(a===i)return[];for(;t.charAt(i-1)==="\0";)i--;return t.slice(a,i).split(/\0/g)}const ai=e=>{var t,a;return"validationError"in(((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.details)??{})},ii=e=>{var t,a;return"applicationError"in(((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.details)??{})},ri=e=>{var t,a;return(((t=e.response)==null?void 0:t.status)??-1)>=400&&(((a=e.response)==null?void 0:a.status)??-1)<500};function _(e,t={explicitPathsToArguments:{},spreadPathsToArguments:{},singleArgumentUnchanged:!1},a=[]){var i,r,n;if(typeof e!="object"||e===null)throw e;if(ai(e))return ni(e.response.data,t,a);if(ii(e))return oi(e);if(ri(e)){const s=((i=e.response)==null?void 0:i.statusText)??"UNKNOWN",o=((n=(r=e.response)==null?void 0:r.data)==null?void 0:n.message)??s,l={applicationError:{description:s,code:Pt(s),data:{}}};return Ge({message:JSON.stringify({message:o,details:l},null,2),extraProperties:{details:l}})}return si(e)}const ni=(e,t,a)=>{var o,l;const{fieldViolations:i}=e.details.validationError,r=(o=li(t,i,a))==null?void 0:o.sort((c,p)=>c.field<p.field?-1:1),n=`INVALID_ARGUMENT: ${(l=r==null?void 0:r.map(({field:c,description:p})=>`"${c}" ${p}`))==null?void 0:l.join(", ")}`,s={validationError:{fieldViolations:r}};return Ge({message:JSON.stringify({message:n,details:s},null,2),extraProperties:{details:s}})},Ge=({message:e,extraProperties:t={}})=>{const a=new Error(e);for(const[i,r]of Object.entries(t))r!==void 0&&(a[i]=r);return a},oi=e=>{var l,c,p,u,g,m,f,y,A,v,R,ae,L,Tt,bt;const t=((l=e.response)==null?void 0:l.statusText)??"UNKNOWN",a=((p=(c=e.response)==null?void 0:c.data)==null?void 0:p.message)??t,i=((f=(m=(g=(u=e.response)==null?void 0:u.data)==null?void 0:g.details)==null?void 0:m.applicationError)==null?void 0:f.description)??t,r=((R=(v=(A=(y=e.response)==null?void 0:y.data)==null?void 0:A.details)==null?void 0:v.applicationError)==null?void 0:R.code)??Pt(t),n=((bt=(Tt=(L=(ae=e.response)==null?void 0:ae.data)==null?void 0:L.details)==null?void 0:Tt.applicationError)==null?void 0:bt.data)??{},s=a===i?a:`${a}: ${i}`,o={applicationError:{description:i,code:r,data:n}};return Ge({message:JSON.stringify({message:s,details:o},null,2),extraProperties:{details:o}})},si=e=>{var a;const t=e.requestId?`System error occurred, request-id: ${e.requestId}`:"System error occurred";return Ge({message:t,extraProperties:{requestId:e.requestId,code:Pt(((a=e.response)==null?void 0:a.statusText)??"UNKNOWN"),...!e.response&&{runtimeError:e}}})},li=({spreadPathsToArguments:e,explicitPathsToArguments:t,singleArgumentUnchanged:a},i,r)=>{const n={...e,...t},s=Object.keys(n);return i==null?void 0:i.filter(o=>!i.some(c=>c.field.length>o.field.length&&c.field.startsWith(o.field)&&s.includes(c.field))).map(o=>{var p;const l=t[o.field];if(l)return{...o,field:Ot(l,r)};const c=(p=s==null?void 0:s.sort((u,g)=>g.length-u.length))==null?void 0:p.find(u=>o.field.startsWith(u));if(c){const u=n[c];if(u)return{...o,field:o.field.replace(c,Ot(u,r))}}return a?{...o,field:`${r[0]}.${o.field}`}:o})},Ot=(e,t)=>{const a=ci(e);return a!==null&&typeof a<"u"?e.replace(`$[${a}]`,t[a]):e},ci=e=>{const t=e.match(/\$\[(?<argIndex>\d+)\]/);return t&&t.groups&&Number(t.groups.argIndex)};function D(e,t=!1){return Wa(e,t)}function Ne(e,t){const a=Jt(e),i=Object.entries(a).reduce((r,[n,s])=>((Array.isArray(s)?s:[s]).forEach(l=>{l!=null&&r.append(n,l)}),r),new URLSearchParams);return t&&i.append(".r",mi(JSON.stringify(e))),i}function pi(e){const t=wi(e.host),a=Ai(t,e.domainToMappings),i=Di(e.protoPath,e.data||{});return Si(i,a)}function Jt(e,t=""){const a={};return Object.entries(e).forEach(([i,r])=>{const n=r!==null&&typeof r=="object"&&!Array.isArray(r),s=di(t,i);if(n){const o=Jt(r,s);Object.assign(a,o)}else a[s]=r}),a}function di(e,t){return`${e}${e?".":""}${t}`}const mi=e=>(typeof btoa<"u"?btoa(e):Buffer.from(e,"utf-8").toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),ui=["wix.com","editorx.com"],hi="_",fi=new RegExp(`\\.(${ui.join("|")})$`),gi=["42.wixprod.net","uw2-edt-1.wixprod.net"],vi="dev.wix-code.com",Pi=/{(.*)}/,yi=new RegExp(`\\.(${gi.join("|")})$`),xi=new RegExp(`.*\\.${vi}$`);function wi(e){return Ii(e).replace(fi,"._base_domain_").replace(yi,"._api_base_domain_").replace(xi,"*.dev.wix-code.com")}function Ii(e){return e.replace("create.editorx.com","editor.editorx.com")}function Ai(e,t){const a=t[e]||t[hi];return!a&&Ei(e)?t[_i]:a}function Ei(e){return!!e.match(/\._base_domain_$/)}const _i="www._base_domain_";function Di(e,t){return e.split("/").map(a=>Ti(a,t)).join("/")}function Ti(e,t){const a=e.match(Pi)||[],i=a[1];if(i){const r=e.replace(a[0],"");return bi(t,i,e,r)}return e}function bi(e,t,a,i){let r=e;for(const n of t.split(".")){if(!r)return a;r=r[n]}return`${r}${i}`}function Si(e,t){const a=t==null?void 0:t.find(i=>e.startsWith(i.destPath));return a?a.srcPath+e.slice(a.destPath.length):e}function ze(e){return ka(e)}function Fi(e){return isFinite(e)?e:e.toString()}function C(e){return e==="NaN"?NaN:e==="Infinity"?1/0:e==="-Infinity"?-1/0:e}function Ri(e){return e.join(",")}function Oi(e){const t=Be(e,"audio"),{protocol:a,pathname:i}=new URL(t),[r,n]=i.replace("audio://v1/","").split("/");return a===Se?n?{id:r,filename:decodeURIComponent(n)}:{id:r}:{url:e}}function N(e){if(!e)return;let t="";e!=null&&e.filename&&(t=`/${encodeURIComponent(e.filename)}`);const a=(e==null?void 0:e.duration)??0;return`${e!=null&&e.id?`wix:audio://v1/${e==null?void 0:e.id}${t}`:e==null?void 0:e.url}${e!=null&&e.id?`#duration=${a}`:""}`}function Ci(e){const t=Be(e,"document"),{protocol:a,pathname:i}=new URL(t),[r,n]=i.replace("document://v1/","").split("/");return a===Se?n?{id:r,filename:decodeURIComponent(n)}:{id:r}:{url:e}}function $(e){if(!e)return;let t="";return e!=null&&e.filename&&(t=`/${encodeURIComponent(e.filename)}`),e.id?`wix:document://v1/${e.id}${t}`:e.url}function Ni(e){if(!e)return;const t=Be(e,"image"),{protocol:a,hash:i,pathname:r}=new URL(t),n=new URLSearchParams(i.replace("#","")),s=n.get("originHeight"),o=n.get("originWidth"),[l,c]=r.replace("image://v1/","").split("/"),p=decodeURIComponent(c);if(a===Se){const u={id:l,height:Number(s),width:Number(o)};return p?{...u,altText:p,filename:p}:u}return{url:e}}function U(e){if(!e)return;let t="";return(e.filename||e.altText)&&(t=`/${encodeURIComponent(e.filename||e.altText)}`),e.id?`wix:image://v1/${e.id}${t}#originWidth=${e.width}&originHeight=${e.height}`:e.url}function $i(e){if(!e)return;const t=Be(e,"video"),{protocol:a,hash:i,pathname:r}=new URL(t),n=new URLSearchParams(i.replace("#","")),s=n.get("posterUri"),o=n.get("posterHeight"),l=n.get("posterWidth"),[c,p]=r.replace("video://v1/","").split("/");if(a===Se){let u={id:c};return p&&(u={...u,filename:decodeURIComponent(p)}),s?{...u,posters:[{id:s.toString(),height:Number(o),width:Number(l)}]}:u}return{url:e}}function M(e){var i;if(!e)return;let t="";e!=null&&e.filename&&(t=`/${encodeURIComponent(e.filename)}`);let a="";if((i=e.posters)!=null&&i.length){const[r,n]=e.posters,s=n||r;let o=s.id||"";if(!o&&s.url){const l=s.url.lastIndexOf("/");l!==-1&&(o=s.url.substring(l+1))}o&&(a=`#posterUri=${o}&posterWidth=${s.width}&posterHeight=${s.height}`)}return e.id?`wix:video://v1/${e.id}${t}${a}`:e.url}function I(e){return pi(Object.assign(e,{domainToMappings:{"apps._base_domain_":[{srcPath:"/_api/wix-privatemedia-proxy-server",destPath:"/api"},{srcPath:"/_api/wix-privatemedia-proxy-server/v1",destPath:"/v1"}],"manage._base_domain_":[{srcPath:"/_api/wix-privatemedia-proxy-server",destPath:""}],"www.wixapis.com":[{srcPath:"/site-media/v1",destPath:"/v1"}],"*.dev.wix-code.com":[{srcPath:"/_api/wix-privatemedia-proxy-server",destPath:""}],"api._api_base_domain_":[{srcPath:"/wix-privatemedia-proxy-server",destPath:""}],"bo._base_domain_":[{srcPath:"/wix-privatemedia-proxy-server",destPath:""}],"wixbo.ai":[{srcPath:"/wix-privatemedia-proxy-server",destPath:""}],"wix-bo.com":[{srcPath:"/wix-privatemedia-proxy-server",destPath:""}],_:[{srcPath:"/wix-privatemedia-proxy-server",destPath:""}],"editor._base_domain_":[{srcPath:"/_api/wix-privatemedia-proxy-server",destPath:""}],"blocks._base_domain_":[{srcPath:"/_api/wix-privatemedia-proxy-server",destPath:""}],"create.editorx":[{srcPath:"/_api/wix-privatemedia-proxy-server",destPath:""}]}}))}const T="@wix/media_files";function Ui(e){function t({host:a}){return{entityFqdn:"wix.media.site_media.v1.file_descriptor",method:"POST",methodFqn:"com.wix.media.site_media.v1.FilesService.GenerateFilesDownloadUrl",packageName:T,url:I({protoPath:"/v1/files/generate-download-url",data:e,host:a}),data:e}}return t}function Mi(e){function t({host:a}){return{entityFqdn:"wix.media.site_media.v1.file_descriptor",method:"POST",methodFqn:"com.wix.media.site_media.v1.FilesService.GenerateFileDownloadUrl",packageName:T,url:I({protoPath:"/v1/files/generate-file-download-url",data:e,host:a}),data:e}}return t}function Li(e){function t({host:a}){return{entityFqdn:"wix.media.site_media.v1.file_descriptor",method:"GET",methodFqn:"com.wix.media.site_media.v1.FilesService.GetFileDescriptor",packageName:T,url:I({protoPath:"/v1/files/get-file-by-id",data:e,host:a}),params:Ne(e),transformResponse:r=>x(r,[{transformFn:F,paths:[{path:"file.createdDate"},{path:"file.updatedDate"},{path:"file.lastUsedDate"},{path:"file.media.image.image.urlExpirationDate"},{path:"file.media.image.previewImage.urlExpirationDate"},{path:"file.media.video.urlExpirationDate"},{path:"file.media.video.resolutions.urlExpirationDate"},{path:"file.media.video.resolutions.poster.urlExpirationDate"},{path:"file.media.video.posters.urlExpirationDate"},{path:"file.media.audio.assets.urlExpirationDate"},{path:"file.media.document.urlExpirationDate"},{path:"file.media.vector.image.urlExpirationDate"},{path:"file.media.vector.previewImage.urlExpirationDate"},{path:"file.media.archive.urlExpirationDate"},{path:"file.media.model3d.urlExpirationDate"},{path:"file.media.model3d.thumbnail.urlExpirationDate"},{path:"file.media.icon.image.urlExpirationDate"},{path:"file.media.icon.previewImage.urlExpirationDate"}]},{transformFn:C,paths:[{path:"file.media.image.image.focalPoint.x"},{path:"file.media.image.image.focalPoint.y"},{path:"file.media.image.faces.confidence"},{path:"file.media.image.previewImage.focalPoint.x"},{path:"file.media.image.previewImage.focalPoint.y"},{path:"file.media.video.resolutions.poster.focalPoint.x"},{path:"file.media.video.resolutions.poster.focalPoint.y"},{path:"file.media.video.posters.focalPoint.x"},{path:"file.media.video.posters.focalPoint.y"},{path:"file.media.vector.image.focalPoint.x"},{path:"file.media.vector.image.focalPoint.y"},{path:"file.media.vector.faces.confidence"},{path:"file.media.vector.previewImage.focalPoint.x"},{path:"file.media.vector.previewImage.focalPoint.y"},{path:"file.media.model3d.thumbnail.focalPoint.x"},{path:"file.media.model3d.thumbnail.focalPoint.y"},{path:"file.media.icon.image.focalPoint.x"},{path:"file.media.icon.image.focalPoint.y"},{path:"file.media.icon.faces.confidence"},{path:"file.media.icon.previewImage.focalPoint.x"},{path:"file.media.icon.previewImage.focalPoint.y"}]}]),fallback:[{method:"GET",url:I({protoPath:"/v1/files/get-file-by-id",data:e,host:a}),params:Ne(e)}]}}return t}function qi(e){function t({host:a}){return{entityFqdn:"wix.media.site_media.v1.file_descriptor",method:"POST",methodFqn:"com.wix.media.site_media.v1.FilesService.GetFileDescriptors",packageName:T,url:I({protoPath:"/v1/files/get-files",data:e,host:a}),data:e,transformResponse:r=>x(r,[{transformFn:F,paths:[{path:"files.createdDate"},{path:"files.updatedDate"},{path:"files.lastUsedDate"},{path:"files.media.image.image.urlExpirationDate"},{path:"files.media.image.previewImage.urlExpirationDate"},{path:"files.media.video.urlExpirationDate"},{path:"files.media.video.resolutions.urlExpirationDate"},{path:"files.media.video.resolutions.poster.urlExpirationDate"},{path:"files.media.video.posters.urlExpirationDate"},{path:"files.media.audio.assets.urlExpirationDate"},{path:"files.media.document.urlExpirationDate"},{path:"files.media.vector.image.urlExpirationDate"},{path:"files.media.vector.previewImage.urlExpirationDate"},{path:"files.media.archive.urlExpirationDate"},{path:"files.media.model3d.urlExpirationDate"},{path:"files.media.model3d.thumbnail.urlExpirationDate"},{path:"files.media.icon.image.urlExpirationDate"},{path:"files.media.icon.previewImage.urlExpirationDate"}]},{transformFn:C,paths:[{path:"files.media.image.image.focalPoint.x"},{path:"files.media.image.image.focalPoint.y"},{path:"files.media.image.faces.confidence"},{path:"files.media.image.previewImage.focalPoint.x"},{path:"files.media.image.previewImage.focalPoint.y"},{path:"files.media.video.resolutions.poster.focalPoint.x"},{path:"files.media.video.resolutions.poster.focalPoint.y"},{path:"files.media.video.posters.focalPoint.x"},{path:"files.media.video.posters.focalPoint.y"},{path:"files.media.vector.image.focalPoint.x"},{path:"files.media.vector.image.focalPoint.y"},{path:"files.media.vector.faces.confidence"},{path:"files.media.vector.previewImage.focalPoint.x"},{path:"files.media.vector.previewImage.focalPoint.y"},{path:"files.media.model3d.thumbnail.focalPoint.x"},{path:"files.media.model3d.thumbnail.focalPoint.y"},{path:"files.media.icon.image.focalPoint.x"},{path:"files.media.icon.image.focalPoint.y"},{path:"files.media.icon.faces.confidence"},{path:"files.media.icon.previewImage.focalPoint.x"},{path:"files.media.icon.previewImage.focalPoint.y"}]}])}}return t}function Wi(e){function t({host:a}){const i=x(e,[{transformFn:Ri,paths:[{path:"fieldMask"}]},{transformFn:Ya,paths:[{path:"file.createdDate"},{path:"file.updatedDate"},{path:"file.lastUsedDate"},{path:"file.media.image.image.urlExpirationDate"},{path:"file.media.image.previewImage.urlExpirationDate"},{path:"file.media.video.urlExpirationDate"},{path:"file.media.video.resolutions.urlExpirationDate"},{path:"file.media.video.resolutions.poster.urlExpirationDate"},{path:"file.media.video.posters.urlExpirationDate"},{path:"file.media.audio.assets.urlExpirationDate"},{path:"file.media.document.urlExpirationDate"},{path:"file.media.vector.image.urlExpirationDate"},{path:"file.media.vector.previewImage.urlExpirationDate"},{path:"file.media.archive.urlExpirationDate"},{path:"file.media.model3d.urlExpirationDate"},{path:"file.media.model3d.thumbnail.urlExpirationDate"},{path:"file.media.icon.image.urlExpirationDate"},{path:"file.media.icon.previewImage.urlExpirationDate"}]},{transformFn:Fi,paths:[{path:"file.media.image.image.focalPoint.x"},{path:"file.media.image.image.focalPoint.y"},{path:"file.media.image.faces.confidence"},{path:"file.media.image.previewImage.focalPoint.x"},{path:"file.media.image.previewImage.focalPoint.y"},{path:"file.media.video.resolutions.poster.focalPoint.x"},{path:"file.media.video.resolutions.poster.focalPoint.y"},{path:"file.media.video.posters.focalPoint.x"},{path:"file.media.video.posters.focalPoint.y"},{path:"file.media.vector.image.focalPoint.x"},{path:"file.media.vector.image.focalPoint.y"},{path:"file.media.vector.faces.confidence"},{path:"file.media.vector.previewImage.focalPoint.x"},{path:"file.media.vector.previewImage.focalPoint.y"},{path:"file.media.model3d.thumbnail.focalPoint.x"},{path:"file.media.model3d.thumbnail.focalPoint.y"},{path:"file.media.icon.image.focalPoint.x"},{path:"file.media.icon.image.focalPoint.y"},{path:"file.media.icon.faces.confidence"},{path:"file.media.icon.previewImage.focalPoint.x"},{path:"file.media.icon.previewImage.focalPoint.y"}]}]);return{entityFqdn:"wix.media.site_media.v1.file_descriptor",method:"PATCH",methodFqn:"com.wix.media.site_media.v1.FilesService.UpdateFileDescriptor",packageName:T,url:I({protoPath:"/v1/files/update-file-descriptor",data:i,host:a}),data:i,transformResponse:n=>x(n,[{transformFn:F,paths:[{path:"file.createdDate"},{path:"file.updatedDate"},{path:"file.lastUsedDate"},{path:"file.media.image.image.urlExpirationDate"},{path:"file.media.image.previewImage.urlExpirationDate"},{path:"file.media.video.urlExpirationDate"},{path:"file.media.video.resolutions.urlExpirationDate"},{path:"file.media.video.resolutions.poster.urlExpirationDate"},{path:"file.media.video.posters.urlExpirationDate"},{path:"file.media.audio.assets.urlExpirationDate"},{path:"file.media.document.urlExpirationDate"},{path:"file.media.vector.image.urlExpirationDate"},{path:"file.media.vector.previewImage.urlExpirationDate"},{path:"file.media.archive.urlExpirationDate"},{path:"file.media.model3d.urlExpirationDate"},{path:"file.media.model3d.thumbnail.urlExpirationDate"},{path:"file.media.icon.image.urlExpirationDate"},{path:"file.media.icon.previewImage.urlExpirationDate"}]},{transformFn:C,paths:[{path:"file.media.image.image.focalPoint.x"},{path:"file.media.image.image.focalPoint.y"},{path:"file.media.image.faces.confidence"},{path:"file.media.image.previewImage.focalPoint.x"},{path:"file.media.image.previewImage.focalPoint.y"},{path:"file.media.video.resolutions.poster.focalPoint.x"},{path:"file.media.video.resolutions.poster.focalPoint.y"},{path:"file.media.video.posters.focalPoint.x"},{path:"file.media.video.posters.focalPoint.y"},{path:"file.media.vector.image.focalPoint.x"},{path:"file.media.vector.image.focalPoint.y"},{path:"file.media.vector.faces.confidence"},{path:"file.media.vector.previewImage.focalPoint.x"},{path:"file.media.vector.previewImage.focalPoint.y"},{path:"file.media.model3d.thumbnail.focalPoint.x"},{path:"file.media.model3d.thumbnail.focalPoint.y"},{path:"file.media.icon.image.focalPoint.x"},{path:"file.media.icon.image.focalPoint.y"},{path:"file.media.icon.faces.confidence"},{path:"file.media.icon.previewImage.focalPoint.x"},{path:"file.media.icon.previewImage.focalPoint.y"}]}])}}return t}function ki(e){function t({host:a}){return{entityFqdn:"wix.media.site_media.v1.file_descriptor",method:"POST",methodFqn:"com.wix.media.site_media.v1.FilesService.GenerateFileUploadUrl",packageName:T,url:I({protoPath:"/v1/files/generate-upload-url",data:e,host:a}),data:e}}return t}function ji(e){function t({host:a}){return{entityFqdn:"wix.media.site_media.v1.file_descriptor",method:"POST",methodFqn:"com.wix.media.site_media.v1.FilesService.GenerateFileResumableUploadUrl",packageName:T,url:I({protoPath:"/v1/files/generate-resumable-upload-url",data:e,host:a}),data:e}}return t}function Ki(e){function t({host:a}){return{entityFqdn:"wix.media.site_media.v1.file_descriptor",method:"POST",methodFqn:"com.wix.media.site_media.v1.FilesService.ImportFile",packageName:T,url:I({protoPath:"/v1/files/import",data:e,host:a}),data:e,transformResponse:r=>x(r,[{transformFn:F,paths:[{path:"file.createdDate"},{path:"file.updatedDate"},{path:"file.lastUsedDate"},{path:"file.media.image.image.urlExpirationDate"},{path:"file.media.image.previewImage.urlExpirationDate"},{path:"file.media.video.urlExpirationDate"},{path:"file.media.video.resolutions.urlExpirationDate"},{path:"file.media.video.resolutions.poster.urlExpirationDate"},{path:"file.media.video.posters.urlExpirationDate"},{path:"file.media.audio.assets.urlExpirationDate"},{path:"file.media.document.urlExpirationDate"},{path:"file.media.vector.image.urlExpirationDate"},{path:"file.media.vector.previewImage.urlExpirationDate"},{path:"file.media.archive.urlExpirationDate"},{path:"file.media.model3d.urlExpirationDate"},{path:"file.media.model3d.thumbnail.urlExpirationDate"},{path:"file.media.icon.image.urlExpirationDate"},{path:"file.media.icon.previewImage.urlExpirationDate"}]},{transformFn:C,paths:[{path:"file.media.image.image.focalPoint.x"},{path:"file.media.image.image.focalPoint.y"},{path:"file.media.image.faces.confidence"},{path:"file.media.image.previewImage.focalPoint.x"},{path:"file.media.image.previewImage.focalPoint.y"},{path:"file.media.video.resolutions.poster.focalPoint.x"},{path:"file.media.video.resolutions.poster.focalPoint.y"},{path:"file.media.video.posters.focalPoint.x"},{path:"file.media.video.posters.focalPoint.y"},{path:"file.media.vector.image.focalPoint.x"},{path:"file.media.vector.image.focalPoint.y"},{path:"file.media.vector.faces.confidence"},{path:"file.media.vector.previewImage.focalPoint.x"},{path:"file.media.vector.previewImage.focalPoint.y"},{path:"file.media.model3d.thumbnail.focalPoint.x"},{path:"file.media.model3d.thumbnail.focalPoint.y"},{path:"file.media.icon.image.focalPoint.x"},{path:"file.media.icon.image.focalPoint.y"},{path:"file.media.icon.faces.confidence"},{path:"file.media.icon.previewImage.focalPoint.x"},{path:"file.media.icon.previewImage.focalPoint.y"}]}])}}return t}function Hi(e){function t({host:a}){return{entityFqdn:"wix.media.site_media.v1.file_descriptor",method:"POST",methodFqn:"com.wix.media.site_media.v1.FilesService.BulkImportFiles",packageName:T,url:I({protoPath:"/v1/bulk/files/import",data:e,host:a}),data:e,transformResponse:r=>x(r,[{transformFn:F,paths:[{path:"files.createdDate"},{path:"files.updatedDate"},{path:"files.lastUsedDate"},{path:"files.media.image.image.urlExpirationDate"},{path:"files.media.image.previewImage.urlExpirationDate"},{path:"files.media.video.urlExpirationDate"},{path:"files.media.video.resolutions.urlExpirationDate"},{path:"files.media.video.resolutions.poster.urlExpirationDate"},{path:"files.media.video.posters.urlExpirationDate"},{path:"files.media.audio.assets.urlExpirationDate"},{path:"files.media.document.urlExpirationDate"},{path:"files.media.vector.image.urlExpirationDate"},{path:"files.media.vector.previewImage.urlExpirationDate"},{path:"files.media.archive.urlExpirationDate"},{path:"files.media.model3d.urlExpirationDate"},{path:"files.media.model3d.thumbnail.urlExpirationDate"},{path:"files.media.icon.image.urlExpirationDate"},{path:"files.media.icon.previewImage.urlExpirationDate"}]},{transformFn:C,paths:[{path:"files.media.image.image.focalPoint.x"},{path:"files.media.image.image.focalPoint.y"},{path:"files.media.image.faces.confidence"},{path:"files.media.image.previewImage.focalPoint.x"},{path:"files.media.image.previewImage.focalPoint.y"},{path:"files.media.video.resolutions.poster.focalPoint.x"},{path:"files.media.video.resolutions.poster.focalPoint.y"},{path:"files.media.video.posters.focalPoint.x"},{path:"files.media.video.posters.focalPoint.y"},{path:"files.media.vector.image.focalPoint.x"},{path:"files.media.vector.image.focalPoint.y"},{path:"files.media.vector.faces.confidence"},{path:"files.media.vector.previewImage.focalPoint.x"},{path:"files.media.vector.previewImage.focalPoint.y"},{path:"files.media.model3d.thumbnail.focalPoint.x"},{path:"files.media.model3d.thumbnail.focalPoint.y"},{path:"files.media.icon.image.focalPoint.x"},{path:"files.media.icon.image.focalPoint.y"},{path:"files.media.icon.faces.confidence"},{path:"files.media.icon.previewImage.focalPoint.x"},{path:"files.media.icon.previewImage.focalPoint.y"}]}])}}return t}function Bi(e){function t({host:a}){return{entityFqdn:"wix.media.site_media.v1.file_descriptor",method:"POST",methodFqn:"com.wix.media.site_media.v1.FilesService.BulkImportFile",packageName:T,url:I({protoPath:"/v1/bulk/files/import-v2",data:e,host:a}),data:e,transformResponse:r=>x(r,[{transformFn:F,paths:[{path:"results.item.createdDate"},{path:"results.item.updatedDate"},{path:"results.item.lastUsedDate"},{path:"results.item.media.image.image.urlExpirationDate"},{path:"results.item.media.image.previewImage.urlExpirationDate"},{path:"results.item.media.video.urlExpirationDate"},{path:"results.item.media.video.resolutions.urlExpirationDate"},{path:"results.item.media.video.resolutions.poster.urlExpirationDate"},{path:"results.item.media.video.posters.urlExpirationDate"},{path:"results.item.media.audio.assets.urlExpirationDate"},{path:"results.item.media.document.urlExpirationDate"},{path:"results.item.media.vector.image.urlExpirationDate"},{path:"results.item.media.vector.previewImage.urlExpirationDate"},{path:"results.item.media.archive.urlExpirationDate"},{path:"results.item.media.model3d.urlExpirationDate"},{path:"results.item.media.model3d.thumbnail.urlExpirationDate"},{path:"results.item.media.icon.image.urlExpirationDate"},{path:"results.item.media.icon.previewImage.urlExpirationDate"}]},{transformFn:C,paths:[{path:"results.item.media.image.image.focalPoint.x"},{path:"results.item.media.image.image.focalPoint.y"},{path:"results.item.media.image.faces.confidence"},{path:"results.item.media.image.previewImage.focalPoint.x"},{path:"results.item.media.image.previewImage.focalPoint.y"},{path:"results.item.media.video.resolutions.poster.focalPoint.x"},{path:"results.item.media.video.resolutions.poster.focalPoint.y"},{path:"results.item.media.video.posters.focalPoint.x"},{path:"results.item.media.video.posters.focalPoint.y"},{path:"results.item.media.vector.image.focalPoint.x"},{path:"results.item.media.vector.image.focalPoint.y"},{path:"results.item.media.vector.faces.confidence"},{path:"results.item.media.vector.previewImage.focalPoint.x"},{path:"results.item.media.vector.previewImage.focalPoint.y"},{path:"results.item.media.model3d.thumbnail.focalPoint.x"},{path:"results.item.media.model3d.thumbnail.focalPoint.y"},{path:"results.item.media.icon.image.focalPoint.x"},{path:"results.item.media.icon.image.focalPoint.y"},{path:"results.item.media.icon.faces.confidence"},{path:"results.item.media.icon.previewImage.focalPoint.x"},{path:"results.item.media.icon.previewImage.focalPoint.y"}]}])}}return t}function Gi(e){function t({host:a}){return{entityFqdn:"wix.media.site_media.v1.file_descriptor",method:"GET",methodFqn:"com.wix.media.site_media.v1.FilesService.ListFiles",packageName:T,url:I({protoPath:"/v1/files",data:e,host:a}),params:Ne(e,!0),transformResponse:r=>x(r,[{transformFn:F,paths:[{path:"files.createdDate"},{path:"files.updatedDate"},{path:"files.lastUsedDate"},{path:"files.media.image.image.urlExpirationDate"},{path:"files.media.image.previewImage.urlExpirationDate"},{path:"files.media.video.urlExpirationDate"},{path:"files.media.video.resolutions.urlExpirationDate"},{path:"files.media.video.resolutions.poster.urlExpirationDate"},{path:"files.media.video.posters.urlExpirationDate"},{path:"files.media.audio.assets.urlExpirationDate"},{path:"files.media.document.urlExpirationDate"},{path:"files.media.vector.image.urlExpirationDate"},{path:"files.media.vector.previewImage.urlExpirationDate"},{path:"files.media.archive.urlExpirationDate"},{path:"files.media.model3d.urlExpirationDate"},{path:"files.media.model3d.thumbnail.urlExpirationDate"},{path:"files.media.icon.image.urlExpirationDate"},{path:"files.media.icon.previewImage.urlExpirationDate"}]},{transformFn:C,paths:[{path:"files.media.image.image.focalPoint.x"},{path:"files.media.image.image.focalPoint.y"},{path:"files.media.image.faces.confidence"},{path:"files.media.image.previewImage.focalPoint.x"},{path:"files.media.image.previewImage.focalPoint.y"},{path:"files.media.video.resolutions.poster.focalPoint.x"},{path:"files.media.video.resolutions.poster.focalPoint.y"},{path:"files.media.video.posters.focalPoint.x"},{path:"files.media.video.posters.focalPoint.y"},{path:"files.media.vector.image.focalPoint.x"},{path:"files.media.vector.image.focalPoint.y"},{path:"files.media.vector.faces.confidence"},{path:"files.media.vector.previewImage.focalPoint.x"},{path:"files.media.vector.previewImage.focalPoint.y"},{path:"files.media.model3d.thumbnail.focalPoint.x"},{path:"files.media.model3d.thumbnail.focalPoint.y"},{path:"files.media.icon.image.focalPoint.x"},{path:"files.media.icon.image.focalPoint.y"},{path:"files.media.icon.faces.confidence"},{path:"files.media.icon.previewImage.focalPoint.x"},{path:"files.media.icon.previewImage.focalPoint.y"}]}])}}return t}function zi(e){function t({host:a}){return{entityFqdn:"wix.media.site_media.v1.file_descriptor",method:"POST",methodFqn:"com.wix.media.site_media.v1.FilesService.SearchFiles",packageName:T,url:I({protoPath:"/v1/files/search",data:e,host:a}),data:e,transformResponse:r=>x(r,[{transformFn:F,paths:[{path:"files.createdDate"},{path:"files.updatedDate"},{path:"files.lastUsedDate"},{path:"files.media.image.image.urlExpirationDate"},{path:"files.media.image.previewImage.urlExpirationDate"},{path:"files.media.video.urlExpirationDate"},{path:"files.media.video.resolutions.urlExpirationDate"},{path:"files.media.video.resolutions.poster.urlExpirationDate"},{path:"files.media.video.posters.urlExpirationDate"},{path:"files.media.audio.assets.urlExpirationDate"},{path:"files.media.document.urlExpirationDate"},{path:"files.media.vector.image.urlExpirationDate"},{path:"files.media.vector.previewImage.urlExpirationDate"},{path:"files.media.archive.urlExpirationDate"},{path:"files.media.model3d.urlExpirationDate"},{path:"files.media.model3d.thumbnail.urlExpirationDate"},{path:"files.media.icon.image.urlExpirationDate"},{path:"files.media.icon.previewImage.urlExpirationDate"}]},{transformFn:C,paths:[{path:"files.media.image.image.focalPoint.x"},{path:"files.media.image.image.focalPoint.y"},{path:"files.media.image.faces.confidence"},{path:"files.media.image.previewImage.focalPoint.x"},{path:"files.media.image.previewImage.focalPoint.y"},{path:"files.media.video.resolutions.poster.focalPoint.x"},{path:"files.media.video.resolutions.poster.focalPoint.y"},{path:"files.media.video.posters.focalPoint.x"},{path:"files.media.video.posters.focalPoint.y"},{path:"files.media.vector.image.focalPoint.x"},{path:"files.media.vector.image.focalPoint.y"},{path:"files.media.vector.faces.confidence"},{path:"files.media.vector.previewImage.focalPoint.x"},{path:"files.media.vector.previewImage.focalPoint.y"},{path:"files.media.model3d.thumbnail.focalPoint.x"},{path:"files.media.model3d.thumbnail.focalPoint.y"},{path:"files.media.icon.image.focalPoint.x"},{path:"files.media.icon.image.focalPoint.y"},{path:"files.media.icon.faces.confidence"},{path:"files.media.icon.previewImage.focalPoint.x"},{path:"files.media.icon.previewImage.focalPoint.y"}]}])}}return t}function Ji(e){function t({host:a}){return{entityFqdn:"wix.media.site_media.v1.file_descriptor",method:"POST",methodFqn:"com.wix.media.site_media.v1.FilesService.GenerateVideoStreamingUrl",packageName:T,url:I({protoPath:"/v1/files/generate-video-stream-url",data:e,host:a}),data:e}}return t}function Xi(e){function t({host:a}){return{entityFqdn:"wix.media.site_media.v1.file_descriptor",method:"POST",methodFqn:"com.wix.media.site_media.v1.FilesService.BulkDeleteFiles",packageName:T,url:I({protoPath:"/v1/bulk/files/delete",data:e,host:a}),data:e}}return t}function Vi(e){function t({host:a}){return{entityFqdn:"wix.media.site_media.v1.file_descriptor",method:"POST",methodFqn:"com.wix.media.site_media.v1.FilesService.BulkRestoreFilesFromTrashBin",packageName:T,url:I({protoPath:"/v1/bulk/trash-bin/files/restore",data:e,host:a}),data:e}}return t}function Yi(e){function t({host:a}){return{entityFqdn:"wix.media.site_media.v1.file_descriptor",method:"GET",methodFqn:"com.wix.media.site_media.v1.FilesService.ListDeletedFiles",packageName:T,url:I({protoPath:"/v1/trash-bin/files",data:e,host:a}),params:Ne(e,!0),transformResponse:r=>x(r,[{transformFn:F,paths:[{path:"files.createdDate"},{path:"files.updatedDate"},{path:"files.lastUsedDate"},{path:"files.media.image.image.urlExpirationDate"},{path:"files.media.image.previewImage.urlExpirationDate"},{path:"files.media.video.urlExpirationDate"},{path:"files.media.video.resolutions.urlExpirationDate"},{path:"files.media.video.resolutions.poster.urlExpirationDate"},{path:"files.media.video.posters.urlExpirationDate"},{path:"files.media.audio.assets.urlExpirationDate"},{path:"files.media.document.urlExpirationDate"},{path:"files.media.vector.image.urlExpirationDate"},{path:"files.media.vector.previewImage.urlExpirationDate"},{path:"files.media.archive.urlExpirationDate"},{path:"files.media.model3d.urlExpirationDate"},{path:"files.media.model3d.thumbnail.urlExpirationDate"},{path:"files.media.icon.image.urlExpirationDate"},{path:"files.media.icon.previewImage.urlExpirationDate"}]},{transformFn:C,paths:[{path:"files.media.image.image.focalPoint.x"},{path:"files.media.image.image.focalPoint.y"},{path:"files.media.image.faces.confidence"},{path:"files.media.image.previewImage.focalPoint.x"},{path:"files.media.image.previewImage.focalPoint.y"},{path:"files.media.video.resolutions.poster.focalPoint.x"},{path:"files.media.video.resolutions.poster.focalPoint.y"},{path:"files.media.video.posters.focalPoint.x"},{path:"files.media.video.posters.focalPoint.y"},{path:"files.media.vector.image.focalPoint.x"},{path:"files.media.vector.image.focalPoint.y"},{path:"files.media.vector.faces.confidence"},{path:"files.media.vector.previewImage.focalPoint.x"},{path:"files.media.vector.previewImage.focalPoint.y"},{path:"files.media.model3d.thumbnail.focalPoint.x"},{path:"files.media.model3d.thumbnail.focalPoint.y"},{path:"files.media.icon.image.focalPoint.x"},{path:"files.media.icon.image.focalPoint.y"},{path:"files.media.icon.faces.confidence"},{path:"files.media.icon.previewImage.focalPoint.x"},{path:"files.media.icon.previewImage.focalPoint.y"}]}])}}return t}var et;(function(e){e.UNKNOWN="UNKNOWN",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT",e.VECTOR="VECTOR",e.ARCHIVE="ARCHIVE",e.MODEL3D="MODEL3D",e.OTHER="OTHER"})(et||(et={}));var tt;(function(e){e.FAILED="FAILED",e.READY="READY",e.PENDING="PENDING"})(tt||(tt={}));var at;(function(e){e.OK="OK",e.DELETED="DELETED"})(at||(at={}));var it;(function(e){e.NO_NAMESPACE="NO_NAMESPACE",e.OTHERS="OTHERS",e.WIX_VIDEO="WIX_VIDEO",e.WIX_MUSIC="WIX_MUSIC",e.ALBUMS_AND_ART_STORE="ALBUMS_AND_ART_STORE",e.WIX_ECOM="WIX_ECOM",e.PHOTO_SHARE_APP="PHOTO_SHARE_APP",e.SHARING_APP="SHARING_APP",e.CHAT="CHAT",e.LOGO_BUILDER="LOGO_BUILDER",e.ALBUMS_OLD="ALBUMS_OLD",e.CHAT_MOBILE="CHAT_MOBILE",e.WIX_FORMS="WIX_FORMS"})(it||(it={}));var rt;(function(e){e.UNKNOWN="UNKNOWN",e.ANONYMOUS_VISITOR="ANONYMOUS_VISITOR",e.MEMBER="MEMBER",e.WIX_USER="WIX_USER",e.APP="APP"})(rt||(rt={}));var nt;(function(e){e.UNKNOWN_IMAGE_ANNOTATION_TYPE="UNKNOWN_IMAGE_ANNOTATION_TYPE",e.CONTAINS_TEXT="CONTAINS_TEXT",e.IS_ANIMATED="IS_ANIMATED",e.FACES="FACES",e.LABELS="LABELS",e.COLORS="COLORS",e.CAPTION="CAPTION"})(nt||(nt={}));var ot;(function(e){e.ATTACHMENT="ATTACHMENT",e.INLINE="INLINE"})(ot||(ot={}));var st;(function(e){e.TUS="TUS"})(st||(st={}));var lt;(function(e){e.ASC="ASC",e.DESC="DESC"})(lt||(lt={}));var ct;(function(e){e.MEDIA_ROOT="MEDIA_ROOT",e.TRASH_ROOT="TRASH_ROOT",e.VISITOR_UPLOADS_ROOT="VISITOR_UPLOADS_ROOT"})(ct||(ct={}));var pt;(function(e){e.UNKNOWN="UNKNOWN",e.HLS="HLS",e.DASH="DASH"})(pt||(pt={}));var dt;(function(e){e.UNKNOWN="UNKNOWN",e.ANONYMOUS_VISITOR="ANONYMOUS_VISITOR",e.MEMBER="MEMBER",e.WIX_USER="WIX_USER",e.APP="APP"})(dt||(dt={}));async function Qi(e){var n,s,o;const{httpClient:t,sideEffects:a}=arguments[1],i=E({fileIds:e}),r=Ui(i);(n=a==null?void 0:a.onSiteCall)==null||n.call(a);try{const l=await t.request(r);return(s=a==null?void 0:a.onSuccess)==null||s.call(a,l),w(l.data)}catch(l){const c=_(l,{spreadPathsToArguments:{},explicitPathsToArguments:{fileIds:"$[0]"},singleArgumentUnchanged:!1},["fileIds"]);throw(o=a==null?void 0:a.onError)==null||o.call(a,l),c}}async function Zi(e,t){var s,o,l;const{httpClient:a,sideEffects:i}=arguments[2],r=E({fileId:e,downloadFileName:t==null?void 0:t.downloadFileName,expirationInMinutes:t==null?void 0:t.expirationInMinutes,expirationRedirectUrl:t==null?void 0:t.expirationRedirectUrl,assetKeys:t==null?void 0:t.assetKeys,contentDisposition:t==null?void 0:t.contentDisposition}),n=Mi(r);(s=i==null?void 0:i.onSiteCall)==null||s.call(i);try{const c=await a.request(n);return(o=i==null?void 0:i.onSuccess)==null||o.call(i,c),w(c.data)}catch(c){const p=_(c,{spreadPathsToArguments:{},explicitPathsToArguments:{fileId:"$[0]",downloadFileName:"$[1].downloadFileName",expirationInMinutes:"$[1].expirationInMinutes",expirationRedirectUrl:"$[1].expirationRedirectUrl",assetKeys:"$[1].assetKeys",contentDisposition:"$[1].contentDisposition"},singleArgumentUnchanged:!1},["fileId","options"]);throw(l=i==null?void 0:i.onError)==null||l.call(i,c),p}}async function er(e){var n,s,o,l;const{httpClient:t,sideEffects:a}=arguments[1],i=E({fileId:e}),r=Li(i);(n=a==null?void 0:a.onSiteCall)==null||n.call(a);try{const c=await t.request(r);return(s=a==null?void 0:a.onSuccess)==null||s.call(a,c),(o=w(x(c.data,[{transformFn:M,paths:[{path:"file.media.video"}]},{transformFn:$,paths:[{path:"file.media.document"}]},{transformFn:U,paths:[{path:"file.media.image.image"},{path:"file.media.image.previewImage"},{path:"file.media.vector.image"},{path:"file.media.vector.previewImage"},{path:"file.media.model3d.thumbnail"},{path:"file.media.icon.image"},{path:"file.media.icon.previewImage"}]},{transformFn:N,paths:[{path:"file.media.audio.assets",isRepeated:!0}]}])))==null?void 0:o.file}catch(c){const p=_(c,{spreadPathsToArguments:{},explicitPathsToArguments:{fileId:"$[0]"},singleArgumentUnchanged:!1},["fileId"]);throw(l=a==null?void 0:a.onError)==null||l.call(a,c),p}}async function tr(e){var n,s,o;const{httpClient:t,sideEffects:a}=arguments[1],i=E({fileIds:e}),r=qi(i);(n=a==null?void 0:a.onSiteCall)==null||n.call(a);try{const l=await t.request(r);return(s=a==null?void 0:a.onSuccess)==null||s.call(a,l),w(x(l.data,[{transformFn:M,paths:[{path:"files.media.video"}]},{transformFn:$,paths:[{path:"files.media.document"}]},{transformFn:U,paths:[{path:"files.media.image.image"},{path:"files.media.image.previewImage"},{path:"files.media.vector.image"},{path:"files.media.vector.previewImage"},{path:"files.media.model3d.thumbnail"},{path:"files.media.icon.image"},{path:"files.media.icon.previewImage"}]},{transformFn:N,paths:[{path:"files.media.audio.assets",isRepeated:!0}]}]))}catch(l){const c=_(l,{spreadPathsToArguments:{},explicitPathsToArguments:{fileIds:"$[0]"},singleArgumentUnchanged:!1},["fileIds"]);throw(o=a==null?void 0:a.onError)==null||o.call(a,l),c}}async function ar(e){var n,s,o,l;const{httpClient:t,sideEffects:a}=arguments[1],i=x(E({file:e}),[{transformFn:$i,paths:[{path:"file.media.video"}]},{transformFn:Ci,paths:[{path:"file.media.document"}]},{transformFn:Ni,paths:[{path:"file.media.image.image"},{path:"file.media.image.previewImage"},{path:"file.media.vector.image"},{path:"file.media.vector.previewImage"},{path:"file.media.model3d.thumbnail"},{path:"file.media.icon.image"},{path:"file.media.icon.previewImage"}]},{transformFn:Oi,paths:[{path:"file.media.audio.assets",isRepeated:!0}]}]),r=Wi(i);(n=a==null?void 0:a.onSiteCall)==null||n.call(a);try{const c=await t.request(r);return(s=a==null?void 0:a.onSuccess)==null||s.call(a,c),(o=w(x(c.data,[{transformFn:M,paths:[{path:"file.media.video"}]},{transformFn:$,paths:[{path:"file.media.document"}]},{transformFn:U,paths:[{path:"file.media.image.image"},{path:"file.media.image.previewImage"},{path:"file.media.vector.image"},{path:"file.media.vector.previewImage"},{path:"file.media.model3d.thumbnail"},{path:"file.media.icon.image"},{path:"file.media.icon.previewImage"}]},{transformFn:N,paths:[{path:"file.media.audio.assets",isRepeated:!0}]}])))==null?void 0:o.file}catch(c){const p=_(c,{spreadPathsToArguments:{},explicitPathsToArguments:{file:"$[0]"},singleArgumentUnchanged:!1},["file"]);throw(l=a==null?void 0:a.onError)==null||l.call(a,c),p}}async function ir(e,t){var s,o,l;const{httpClient:a,sideEffects:i}=arguments[2],r=E({mimeType:e,fileName:t==null?void 0:t.fileName,sizeInBytes:t==null?void 0:t.sizeInBytes,parentFolderId:t==null?void 0:t.parentFolderId,private:t==null?void 0:t.private,labels:t==null?void 0:t.labels,externalInfo:t==null?void 0:t.externalInfo,filePath:t==null?void 0:t.filePath}),n=ki(r);(s=i==null?void 0:i.onSiteCall)==null||s.call(i);try{const c=await a.request(n);return(o=i==null?void 0:i.onSuccess)==null||o.call(i,c),w(c.data)}catch(c){const p=_(c,{spreadPathsToArguments:{},explicitPathsToArguments:{mimeType:"$[0]",fileName:"$[1].fileName",sizeInBytes:"$[1].sizeInBytes",parentFolderId:"$[1].parentFolderId",private:"$[1].private",labels:"$[1].labels",externalInfo:"$[1].externalInfo",filePath:"$[1].filePath"},singleArgumentUnchanged:!1},["mimeType","options"]);throw(l=i==null?void 0:i.onError)==null||l.call(i,c),p}}async function rr(e,t){var s,o,l;const{httpClient:a,sideEffects:i}=arguments[2],r=E({mimeType:e,fileName:t==null?void 0:t.fileName,sizeInBytes:t==null?void 0:t.sizeInBytes,parentFolderId:t==null?void 0:t.parentFolderId,private:t==null?void 0:t.private,labels:t==null?void 0:t.labels,uploadProtocol:t==null?void 0:t.uploadProtocol,filePath:t==null?void 0:t.filePath}),n=ji(r);(s=i==null?void 0:i.onSiteCall)==null||s.call(i);try{const c=await a.request(n);return(o=i==null?void 0:i.onSuccess)==null||o.call(i,c),w(c.data)}catch(c){const p=_(c,{spreadPathsToArguments:{},explicitPathsToArguments:{mimeType:"$[0]",fileName:"$[1].fileName",sizeInBytes:"$[1].sizeInBytes",parentFolderId:"$[1].parentFolderId",private:"$[1].private",labels:"$[1].labels",uploadProtocol:"$[1].uploadProtocol",filePath:"$[1].filePath"},singleArgumentUnchanged:!1},["mimeType","options"]);throw(l=i==null?void 0:i.onError)==null||l.call(i,c),p}}async function nr(e,t){var s,o,l;const{httpClient:a,sideEffects:i}=arguments[2],r=E({url:e,mediaType:t==null?void 0:t.mediaType,displayName:t==null?void 0:t.displayName,parentFolderId:t==null?void 0:t.parentFolderId,private:t==null?void 0:t.private,labels:t==null?void 0:t.labels,mimeType:t==null?void 0:t.mimeType,externalInfo:t==null?void 0:t.externalInfo,urlParams:t==null?void 0:t.urlParams,urlHeaders:t==null?void 0:t.urlHeaders,filePath:t==null?void 0:t.filePath}),n=Ki(r);(s=i==null?void 0:i.onSiteCall)==null||s.call(i);try{const c=await a.request(n);return(o=i==null?void 0:i.onSuccess)==null||o.call(i,c),w(x(c.data,[{transformFn:M,paths:[{path:"file.media.video"}]},{transformFn:$,paths:[{path:"file.media.document"}]},{transformFn:U,paths:[{path:"file.media.image.image"},{path:"file.media.image.previewImage"},{path:"file.media.vector.image"},{path:"file.media.vector.previewImage"},{path:"file.media.model3d.thumbnail"},{path:"file.media.icon.image"},{path:"file.media.icon.previewImage"}]},{transformFn:N,paths:[{path:"file.media.audio.assets",isRepeated:!0}]}]))}catch(c){const p=_(c,{spreadPathsToArguments:{},explicitPathsToArguments:{url:"$[0]",mediaType:"$[1].mediaType",displayName:"$[1].displayName",parentFolderId:"$[1].parentFolderId",private:"$[1].private",labels:"$[1].labels",mimeType:"$[1].mimeType",externalInfo:"$[1].externalInfo",urlParams:"$[1].urlParams",urlHeaders:"$[1].urlHeaders",filePath:"$[1].filePath"},singleArgumentUnchanged:!1},["url","options"]);throw(l=i==null?void 0:i.onError)==null||l.call(i,c),p}}async function or(e){var n,s,o;const{httpClient:t,sideEffects:a}=arguments[1],i=E({importFileRequests:e}),r=Hi(i);(n=a==null?void 0:a.onSiteCall)==null||n.call(a);try{const l=await t.request(r);return(s=a==null?void 0:a.onSuccess)==null||s.call(a,l),w(x(l.data,[{transformFn:M,paths:[{path:"files.media.video"}]},{transformFn:$,paths:[{path:"files.media.document"}]},{transformFn:U,paths:[{path:"files.media.image.image"},{path:"files.media.image.previewImage"},{path:"files.media.vector.image"},{path:"files.media.vector.previewImage"},{path:"files.media.model3d.thumbnail"},{path:"files.media.icon.image"},{path:"files.media.icon.previewImage"}]},{transformFn:N,paths:[{path:"files.media.audio.assets",isRepeated:!0}]}]))}catch(l){const c=_(l,{spreadPathsToArguments:{},explicitPathsToArguments:{importFileRequests:"$[0]"},singleArgumentUnchanged:!1},["importFileRequests"]);throw(o=a==null?void 0:a.onError)==null||o.call(a,l),c}}async function sr(e,t){var s,o,l;const{httpClient:a,sideEffects:i}=arguments[2],r=E({importFileRequests:e,returnEntity:t==null?void 0:t.returnEntity}),n=Bi(r);(s=i==null?void 0:i.onSiteCall)==null||s.call(i);try{const c=await a.request(n);return(o=i==null?void 0:i.onSuccess)==null||o.call(i,c),w(x(c.data,[{transformFn:M,paths:[{path:"results.item.media.video"}]},{transformFn:$,paths:[{path:"results.item.media.document"}]},{transformFn:U,paths:[{path:"results.item.media.image.image"},{path:"results.item.media.image.previewImage"},{path:"results.item.media.vector.image"},{path:"results.item.media.vector.previewImage"},{path:"results.item.media.model3d.thumbnail"},{path:"results.item.media.icon.image"},{path:"results.item.media.icon.previewImage"}]},{transformFn:N,paths:[{path:"results.item.media.audio.assets",isRepeated:!0}]}]))}catch(c){const p=_(c,{spreadPathsToArguments:{},explicitPathsToArguments:{importFileRequests:"$[0]",returnEntity:"$[1].returnEntity"},singleArgumentUnchanged:!1},["importFileRequests","options"]);throw(l=i==null?void 0:i.onError)==null||l.call(i,c),p}}async function lr(e){var n,s,o;const{httpClient:t,sideEffects:a}=arguments[1],i=E({parentFolderId:e==null?void 0:e.parentFolderId,mediaTypes:e==null?void 0:e.mediaTypes,private:e==null?void 0:e.private,sort:e==null?void 0:e.sort,paging:e==null?void 0:e.paging}),r=Gi(i);(n=a==null?void 0:a.onSiteCall)==null||n.call(a);try{const l=await t.request(r);return(s=a==null?void 0:a.onSuccess)==null||s.call(a,l),w(x(l.data,[{transformFn:M,paths:[{path:"files.media.video"}]},{transformFn:$,paths:[{path:"files.media.document"}]},{transformFn:U,paths:[{path:"files.media.image.image"},{path:"files.media.image.previewImage"},{path:"files.media.vector.image"},{path:"files.media.vector.previewImage"},{path:"files.media.model3d.thumbnail"},{path:"files.media.icon.image"},{path:"files.media.icon.previewImage"}]},{transformFn:N,paths:[{path:"files.media.audio.assets",isRepeated:!0}]}]))}catch(l){const c=_(l,{spreadPathsToArguments:{},explicitPathsToArguments:{parentFolderId:"$[0].parentFolderId",mediaTypes:"$[0].mediaTypes",private:"$[0].private",sort:"$[0].sort",paging:"$[0].paging"},singleArgumentUnchanged:!1},["options"]);throw(o=a==null?void 0:a.onError)==null||o.call(a,l),c}}async function cr(e){var n,s,o;const{httpClient:t,sideEffects:a}=arguments[1],i=E({search:e==null?void 0:e.search,rootFolder:e==null?void 0:e.rootFolder,mediaTypes:e==null?void 0:e.mediaTypes,private:e==null?void 0:e.private,sort:e==null?void 0:e.sort,paging:e==null?void 0:e.paging}),r=zi(i);(n=a==null?void 0:a.onSiteCall)==null||n.call(a);try{const l=await t.request(r);return(s=a==null?void 0:a.onSuccess)==null||s.call(a,l),w(x(l.data,[{transformFn:M,paths:[{path:"files.media.video"}]},{transformFn:$,paths:[{path:"files.media.document"}]},{transformFn:U,paths:[{path:"files.media.image.image"},{path:"files.media.image.previewImage"},{path:"files.media.vector.image"},{path:"files.media.vector.previewImage"},{path:"files.media.model3d.thumbnail"},{path:"files.media.icon.image"},{path:"files.media.icon.previewImage"}]},{transformFn:N,paths:[{path:"files.media.audio.assets",isRepeated:!0}]}]))}catch(l){const c=_(l,{spreadPathsToArguments:{},explicitPathsToArguments:{search:"$[0].search",rootFolder:"$[0].rootFolder",mediaTypes:"$[0].mediaTypes",private:"$[0].private",sort:"$[0].sort",paging:"$[0].paging"},singleArgumentUnchanged:!1},["options"]);throw(o=a==null?void 0:a.onError)==null||o.call(a,l),c}}async function pr(e,t){var s,o,l;const{httpClient:a,sideEffects:i}=arguments[2],r=E({fileId:e,format:t==null?void 0:t.format}),n=Ji(r);(s=i==null?void 0:i.onSiteCall)==null||s.call(i);try{const c=await a.request(n);return(o=i==null?void 0:i.onSuccess)==null||o.call(i,c),w(c.data)}catch(c){const p=_(c,{spreadPathsToArguments:{},explicitPathsToArguments:{fileId:"$[0]",format:"$[1].format"},singleArgumentUnchanged:!1},["fileId","options"]);throw(l=i==null?void 0:i.onError)==null||l.call(i,c),p}}async function dr(e,t){var s,o,l;const{httpClient:a,sideEffects:i}=arguments[2],r=E({fileIds:e,permanent:t==null?void 0:t.permanent}),n=Xi(r);(s=i==null?void 0:i.onSiteCall)==null||s.call(i);try{const c=await a.request(n);(o=i==null?void 0:i.onSuccess)==null||o.call(i,c)}catch(c){const p=_(c,{spreadPathsToArguments:{},explicitPathsToArguments:{fileIds:"$[0]",permanent:"$[1].permanent"},singleArgumentUnchanged:!1},["fileIds","options"]);throw(l=i==null?void 0:i.onError)==null||l.call(i,c),p}}async function mr(e){var n,s,o;const{httpClient:t,sideEffects:a}=arguments[1],i=E({fileIds:e}),r=Vi(i);(n=a==null?void 0:a.onSiteCall)==null||n.call(a);try{const l=await t.request(r);(s=a==null?void 0:a.onSuccess)==null||s.call(a,l)}catch(l){const c=_(l,{spreadPathsToArguments:{},explicitPathsToArguments:{fileIds:"$[0]"},singleArgumentUnchanged:!1},["fileIds"]);throw(o=a==null?void 0:a.onError)==null||o.call(a,l),c}}async function ur(e){var n,s,o;const{httpClient:t,sideEffects:a}=arguments[1],i=E({parentFolderId:e==null?void 0:e.parentFolderId,mediaTypes:e==null?void 0:e.mediaTypes,private:e==null?void 0:e.private,sort:e==null?void 0:e.sort,paging:e==null?void 0:e.paging}),r=Yi(i);(n=a==null?void 0:a.onSiteCall)==null||n.call(a);try{const l=await t.request(r);return(s=a==null?void 0:a.onSuccess)==null||s.call(a,l),w(x(l.data,[{transformFn:M,paths:[{path:"files.media.video"}]},{transformFn:$,paths:[{path:"files.media.document"}]},{transformFn:U,paths:[{path:"files.media.image.image"},{path:"files.media.image.previewImage"},{path:"files.media.vector.image"},{path:"files.media.vector.previewImage"},{path:"files.media.model3d.thumbnail"},{path:"files.media.icon.image"},{path:"files.media.icon.previewImage"}]},{transformFn:N,paths:[{path:"files.media.audio.assets",isRepeated:!0}]}]))}catch(l){const c=_(l,{spreadPathsToArguments:{},explicitPathsToArguments:{parentFolderId:"$[0].parentFolderId",mediaTypes:"$[0].mediaTypes",private:"$[0].private",sort:"$[0].sort",paging:"$[0].paging"},singleArgumentUnchanged:!1},["options"]);throw(o=a==null?void 0:a.onError)==null||o.call(a,l),c}}function hr(e){return t=>Qi(t,{httpClient:e})}function fr(e){return(t,a)=>Zi(t,a,{httpClient:e})}function gr(e){return t=>er(t,{httpClient:e})}function vr(e){return t=>tr(t,{httpClient:e})}function Pr(e){return t=>ar(t,{httpClient:e})}function yr(e){return(t,a)=>ir(t,a,{httpClient:e})}function xr(e){return(t,a)=>rr(t,a,{httpClient:e})}function wr(e){return(t,a)=>nr(t,a,{httpClient:e})}function Ir(e){return t=>or(t,{httpClient:e})}function Ar(e){return(t,a)=>sr(t,a,{httpClient:e})}function Er(e){return t=>lr(t,{httpClient:e})}function _r(e){return t=>cr(t,{httpClient:e})}function Dr(e){return(t,a)=>pr(t,a,{httpClient:e})}function Tr(e){return(t,a)=>dr(t,a,{httpClient:e})}function br(e){return t=>mr(t,{httpClient:e})}function Sr(e){return t=>ur(t,{httpClient:e})}const Fr=Y("wix.media.site_media.v1.file_descriptor_deleted",!0,e=>w(x(e,[{transformFn:F,paths:[{path:"undefined.createdDate"},{path:"undefined.updatedDate"},{path:"undefined.lastUsedDate"},{path:"undefined.media.archive.urlExpirationDate"},{path:"undefined.media.model3d.urlExpirationDate"},{path:"metadata.eventTime"}]},{transformFn:M,paths:[{path:"undefined.media.video"}]},{transformFn:$,paths:[{path:"undefined.media.document"}]},{transformFn:U,paths:[{path:"undefined.media.image.image"},{path:"undefined.media.image.previewImage"},{path:"undefined.media.vector.image"},{path:"undefined.media.vector.previewImage"},{path:"undefined.media.model3d.thumbnail"},{path:"undefined.media.icon.image"},{path:"undefined.media.icon.previewImage"}]},{transformFn:C,paths:[{path:"undefined.media.image.faces.confidence"},{path:"undefined.media.vector.faces.confidence"},{path:"undefined.media.icon.faces.confidence"}]},{transformFn:N,paths:[{path:"undefined.media.audio.assets",isRepeated:!0}]}])))(),Rr=Y("wix.media.site_media.v1.file_descriptor_file_failed",!0,e=>w(x(e,[{transformFn:F,paths:[{path:"metadata.eventTime"}]}])))(),Or=Y("wix.media.site_media.v1.file_descriptor_file_ready",!0,e=>w(x(e,[{transformFn:F,paths:[{path:"data.file.createdDate"},{path:"data.file.updatedDate"},{path:"data.file.lastUsedDate"},{path:"data.file.media.archive.urlExpirationDate"},{path:"data.file.media.model3d.urlExpirationDate"},{path:"metadata.eventTime"}]},{transformFn:M,paths:[{path:"data.file.media.video"}]},{transformFn:$,paths:[{path:"data.file.media.document"}]},{transformFn:U,paths:[{path:"data.file.media.image.image"},{path:"data.file.media.image.previewImage"},{path:"data.file.media.vector.image"},{path:"data.file.media.vector.previewImage"},{path:"data.file.media.model3d.thumbnail"},{path:"data.file.media.icon.image"},{path:"data.file.media.icon.previewImage"}]},{transformFn:C,paths:[{path:"data.file.media.image.faces.confidence"},{path:"data.file.media.vector.faces.confidence"},{path:"data.file.media.icon.faces.confidence"}]},{transformFn:N,paths:[{path:"data.file.media.audio.assets",isRepeated:!0}]}])))(),Cr=Y("wix.media.site_media.v1.file_descriptor_updated",!0,e=>w(x(e,[{transformFn:F,paths:[{path:"entity.createdDate"},{path:"entity.updatedDate"},{path:"entity.lastUsedDate"},{path:"entity.media.archive.urlExpirationDate"},{path:"entity.media.model3d.urlExpirationDate"},{path:"metadata.eventTime"}]},{transformFn:M,paths:[{path:"entity.media.video"}]},{transformFn:$,paths:[{path:"entity.media.document"}]},{transformFn:U,paths:[{path:"entity.media.image.image"},{path:"entity.media.image.previewImage"},{path:"entity.media.vector.image"},{path:"entity.media.vector.previewImage"},{path:"entity.media.model3d.thumbnail"},{path:"entity.media.icon.image"},{path:"entity.media.icon.previewImage"}]},{transformFn:C,paths:[{path:"entity.media.image.faces.confidence"},{path:"entity.media.vector.faces.confidence"},{path:"entity.media.icon.faces.confidence"}]},{transformFn:N,paths:[{path:"entity.media.audio.assets",isRepeated:!0}]}])))(),Nr=D(hr),$r=D(fr),Ur=D(gr),Mr=D(vr),Lr=D(Pr),qr=D(yr),Wr=D(xr),kr=D(wr),jr=D(Ir),Kr=D(Ar),Hr=D(Er),Br=D(_r),Gr=D(Dr),zr=D(Tr),Jr=D(br),Xr=D(Sr),Vr=ze(Fr),Yr=ze(Rr),Qr=ze(Or),Zr=ze(Cr),en=Object.freeze(Object.defineProperty({__proto__:null,get ContentDisposition(){return ot},get IdentityType(){return rt},get ImageAnnotationType(){return nt},get MediaType(){return et},get Namespace(){return it},get OperationStatus(){return tt},get RootFolder(){return ct},get SortOrder(){return lt},get State(){return at},get StreamFormat(){return pt},get UploadProtocol(){return st},get WebhookIdentityType(){return dt},bulkDeleteFiles:zr,bulkImportFile:Kr,bulkImportFiles:jr,bulkRestoreFilesFromTrashBin:Jr,generateFileDownloadUrl:$r,generateFileResumableUploadUrl:Wr,generateFileUploadUrl:qr,generateFilesDownloadUrl:Nr,generateVideoStreamingUrl:Gr,getFileDescriptor:Ur,getFileDescriptors:Mr,importFile:kr,listDeletedFiles:Xr,listFiles:Hr,onFileDescriptorDeleted:Vr,onFileDescriptorFileFailed:Yr,onFileDescriptorFileReady:Qr,onFileDescriptorUpdated:Zr,searchFiles:Br,updateFileDescriptor:Lr},Symbol.toStringTag,{value:"Module"}));function tn(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var a=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};a.prototype=t.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(a,i,r.get?r:{enumerable:!0,get:function(){return e[i]}})}),a}var ie={};const an=tn(_a);var ue={},Ct;function rn(){if(Ct)return ue;Ct=1,Object.defineProperty(ue,"__esModule",{value:!0}),ue.EventType=void 0;var e;return function(t){t.removeAppCompleted="removeAppCompleted",t.componentSelectionChanged="componentSelectionChanged",t.appInstalled="appInstalled",t.appUpdateCompleted="appUpdateCompleted"}(e||(ue.EventType=e={})),ue}var Nt;function nn(){return Nt||(Nt=1,function(e){var t=ie.__createBinding||(Object.create?function(s,o,l,c){c===void 0&&(c=l);var p=Object.getOwnPropertyDescriptor(o,l);(!p||("get"in p?!o.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return o[l]}}),Object.defineProperty(s,c,p)}:function(s,o,l,c){c===void 0&&(c=l),s[c]=o[l]}),a=ie.__setModuleDefault||(Object.create?function(s,o){Object.defineProperty(s,"default",{enumerable:!0,value:o})}:function(s,o){s.default=o}),i=ie.__importStar||function(){var s=function(o){return s=Object.getOwnPropertyNames||function(l){var c=[];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(c[c.length]=p);return c},s(o)};return function(o){if(o&&o.__esModule)return o;var l={};if(o!=null)for(var c=s(o),p=0;p<c.length;p++)c[p]!=="default"&&t(l,o,c[p]);return a(l,o),l}}();Object.defineProperty(e,"__esModule",{value:!0}),e.EventType=e.WixSDKTypes=void 0;const r=i(an);e.WixSDKTypes=r;var n=rn();Object.defineProperty(e,"EventType",{enumerable:!0,get:function(){return n.EventType}})}(ie)),ie}var he=nn();const J=class J{constructor(){h(this,"uid",0);h(this,"callbacks",new Map);h(this,"inTransaction",!1);h(this,"isSilent",!1);h(this,"queue",[])}silent(t=!0){this.isSilent=t}startTransaction(){this.inTransaction=!0}commit(){this.inTransaction=!1;const t=this.queue;this.queue=[],this.isSilent||t.forEach(a=>{this.notify(a)})}notify(t){this.isSilent||(this.inTransaction?this.queue.push(t):this.callbacks.forEach(a=>{a(t)}))}subscribe(t){const a=this.uid++;return this.callbacks.set(a,t),()=>{this.callbacks.delete(a)}}notifyWithStep(t,a){this.notify({...t,meta:{...t.meta,step:a}})}async withEvent(t,a){let i=a();if(i&&i.hasOwnProperty("then"))try{return this.notifyWithStep(t,J.EventSteps.Start),i=await i,this.notifyWithStep(t,J.EventSteps.End),i}catch(r){throw this.notifyWithStep({...t,meta:{...t.meta,error:r}},J.EventSteps.Error),r}else return this.notify(t),i}};h(J,"biEvents",{PLATFORM_WORKER_SPAWN:123,PLATFORM_APP_RUNNER_INIT_APP_API:124,PLATFORM_APP_RUNNER_RUN_APP:125,PLATFORM_APP_RUNNER_REMOVE_APP:126,PLATFORM_WORKER_APP_BUNDLE_LOAD:127,PLATFORM_WORKER_APP_BUNDLE_EXECUTE:128,PLATFORM_IFRAME_INIT:129,PLATFORM_APP_API_INIT:130,PLATFORM_APP_API_GET:131}),h(J,"EventSteps",{Start:"start",End:"end",Error:"error"});let mt=J;var yt=(e=>(e.WorkerSpawn="WorkerSpawn",e.HostEvent="HostEvent",e.ApplicationsSpecsReceived="ApplicationsSpecsReceived",e.InitApplicationApi="InitApplicationApi",e.RunApplication="RunApplication",e.getApplicationApi="getApplicationApi",e.IframeInit="IframeInit",e))(yt||{}),Xt=(e=>(e.EditorReady="EditorReady",e))(Xt||{}),H=(e=>(e.ApplicationInit="ApplicationInit",e.ApplicationExecute="ApplicationExecute",e.ApplicationRemoved="ApplicationRemoved",e.ApplicationLoad="ApplicationLoad",e.ApplicationApiInit="ApplicationApiInit",e.CustomEvent="CustomEvent",e.HostEvent="HostEvent",e.EditorReady="EditorReady",e))(H||{});class on{createApplicationRemovedEvent(t){return{type:"ApplicationRemoved",payload:{appDefinitionId:t},meta:{bi:{evid:re.biEvents.PLATFORM_WORKER_SPAWN,appDefId:t}}}}createApplicationLoadEvent(t,a){return{type:"ApplicationLoad",payload:{appDefinitionId:t.appDefinitionId,url:a},meta:{bi:{evid:re.biEvents.PLATFORM_WORKER_APP_BUNDLE_LOAD,appDefId:t.appDefinitionId,appType:t.appType,bundleUrl:a}}}}createApplicationExecuteEvent(t,a){return{type:"ApplicationExecute",payload:{appDefinitionId:t.appDefinitionId,url:a},meta:{bi:{evid:re.biEvents.PLATFORM_WORKER_APP_BUNDLE_EXECUTE,appDefId:t.appDefinitionId,appType:t.appType,bundleUrl:a}}}}createApplicationApiInitEvent(t,a){return{type:"ApplicationApiInit",payload:{appDefinitionId:t},meta:{bi:{evid:re.biEvents.PLATFORM_APP_API_INIT,appDefId:t,scope:a}}}}}class re extends mt{constructor(){super(...arguments);h(this,"factories",new on)}}const Ue=class Ue{constructor(t){this.events=t}mapToPlatformHostEvent(t){if(typeof t=="string")try{t=JSON.parse(t)}catch{}return{type:yt.HostEvent,payload:{type:t.args.eventType,...t.args.eventPayload},meta:{appDefinitionId:t.appDefinitionId??null,intent:t.intent}}}notify(t){const a=this.mapToPlatformHostEvent(t);Ue.allowedEvents.includes(a.payload.type)&&this.events.notify(a)}};h(Ue,"allowedEvents",[he.EventType.componentSelectionChanged,he.EventType.appInstalled,he.EventType.appUpdateCompleted,he.EventType.removeAppCompleted]);let $t=Ue;class Q extends Error{constructor(a,i,r){const n=a?` ${a}`:"",s=`[${r}]#${i}`;super(`${s}.${n}`);h(this,"state",{});h(this,"displayName");h(this,"prefix");h(this,"errorMessage");h(this,"parent");h(this,"messages",[]);h(this,"code");this.displayName=s,this.errorMessage=a,this.prefix=r,this.code=i,this.name=s,Object.defineProperty(this,"message",{get:()=>this.getDisplayMessage()}),Error.captureStackTrace&&Error.captureStackTrace(this,Q)}get parentError(){const a=this.parent;if(!a)return null;if(this.parent instanceof Q)return this.parent;const i=a.name??"[Unknown Error]";return{getBreadcrumbs(){return[i]},getMessage(){return[i,a.message??"unknown error message"].join(`
`)}}}getDisplayMessage(){return[(this.parentError?this.getBreadcrumbs():[]).join(" -> "),this.getMessage()].filter(i=>i.trim().length).join(`
`)}getMessage(){const a=Object.entries(this.state).reduce((o,[l,c])=>(c&&o.push(` – ${l}: ${c}`),o),[]).join(`
`),i=this.messages.reduce((o,l)=>(o.push(` - ${l.join(" ")}`),o),[]).join(`
`),r=this.parentError,n=r?["",r.getMessage(),""].join(`
`):"",s=this.errorMessage?`${this.displayName}: ${this.errorMessage}`:this.displayName;return[n,s,a,i].filter(o=>o.trim().length).join(`
`)}getBreadcrumbs(){const a=this.parentError;return a?[...a.getBreadcrumbs(),this.displayName]:[this.displayName]}withParentError(a){return this.parent=a,this}withMessage(...a){return this.messages.push(a),this}}function Je(e){return function t(a,i=""){const r=new e(i,a);return Error.captureStackTrace&&Error.captureStackTrace(r,t),r}}var pe=(e=>(e.IncorrectEnvironment="IncorrectEnvironment",e))(pe||{});class sn extends Q{constructor(a,i){super(a,i,"EP Context Error");h(this,"state",{})}withUrl(a){return this.state={...this.state,url:a},this}withAppDefinitionId(a){return this.state={...this.state,appDefinitionId:a},this}}const ye=Je(sn);async function ln(e,t){if(!(e!=null&&e.type))return e;switch(e.type){case"componentSelectionChanged":const a=e.componentRefs||[],i=await Promise.all(a.map(r=>t.components.getComponent(r)));return{type:e.type,components:i};default:return e}}class cn{constructor(t,a,i){h(this,"events");h(this,"subscribe");h(this,"commit");h(this,"startTransaction");h(this,"silent");this.appDefinitionId=t,this.privateAPI=i,this.events=a,this.subscribe=a.subscribe.bind(a),this.commit=a.commit.bind(a),this.startTransaction=a.startTransaction.bind(a),this.silent=a.silent.bind(a)}notify(t){this.events.notify({type:t.type,payload:t.payload,meta:{appDefinitionId:this.appDefinitionId}})}notifyCustomEvent(t,a){this.notify({type:H.CustomEvent,payload:{...a,type:t}})}addEventListener(t,a){return this.events.subscribe(async i=>{var s,o,l,c;const r=((s=i.meta)==null?void 0:s.appDefinitionId)===this.appDefinitionId||((o=i.meta)==null?void 0:o.appDefinitionId)===null,n=()=>ln(i.payload,this.privateAPI);t==="*"?a(await n()):i.type===H.CustomEvent?t===((l=i.payload)==null?void 0:l.type)&&!r&&a(await n()):i.type===H.HostEvent&&t===((c=i.payload)==null?void 0:c.type)&&r&&a(await n())})}}const pn=200,dn=50;var Z,ut,Yt;class Vt{constructor(t){P(this,Z);h(this,"injectionUUID");h(this,"injectionUUID_Deprecated");this.injectionUUID_Deprecated=`__${t}_CONTEXT_INJECTION_STATUS_KEY`,this.injectionUUID=`__${t}_CONTEXT_INJECTION_STATUS_KEY#0.1`,b(this,Z,ut).call(this)||b(this,Z,Yt).call(this)}resolveInjected(){var t;(t=globalThis[this.injectionUUID])==null||t.resolve()}waitInjected(){return new Promise((t,a)=>{var o;let i=!1,r,n=0;const s=()=>{i||(r=setTimeout(()=>{if(n++,n<dn){n%10===0&&console.log(ye(pe.IncorrectEnvironment,"contexts are not resolved, still re-trying").withMessage(`try number ${n}`).message),s();return}if(!i){const l=ye(pe.IncorrectEnvironment,"contexts are not resolved, threw by timeout");a(l)}},pn))};s(),(o=b(this,Z,ut).call(this))==null||o.then(()=>{i=!0,clearTimeout(r),t()})})}}Z=new WeakSet,ut=function(){const t=globalThis[this.injectionUUID];return t==null?void 0:t.promise},Yt=function(){let t;const a=new Promise(i=>{t=i});globalThis[this.injectionUUID]={promise:a,resolve:t},globalThis[this.injectionUUID_Deprecated]=new Promise(i=>{a.then(i)})};const Ye="__ENVIRONMENT_CONTEXT_KEY";var xt=(e=>(e.Worker="Worker",e.Frame="Frame",e.ComponentPanel="ComponentPanel",e))(xt||{});const Me=class Me{constructor(t){this.environmentContext=t}static async inject(t){if(globalThis[Ye])throw ye(pe.IncorrectEnvironment,"Environment context already exists and should not be overridden");globalThis[Ye]=new Me(t),this.status.resolveInjected()}static async getInstance(){return await this.status.waitInjected(),globalThis[Ye]}getPrivateAPI(){return this.environmentContext.privateApi}getEvents(){return this.environmentContext.events}getApplicationAPIs(){return this.environmentContext.applicationAPIs??{}}getEnvironment(){return this.environmentContext.environment}};h(Me,"status",new Vt("environment"));let de=Me;const Oe="__APPLICATION_CONTEXT_KEY",Le=class Le{constructor(t,a){h(this,"events");this.applicationContext=t,this.environment=a,this.events=new cn(this.applicationContext.appDefinitionId,this.environment.getEvents(),this.environment.getPrivateAPI())}static async inject(t){if(globalThis[Oe])throw ye(pe.IncorrectEnvironment,"Application context already exists and should not be overridden");globalThis[Oe]=new Le(t,await de.getInstance()),this.status.resolveInjected()}static async getInstance(){return typeof __APPLICATION_CONTEXT_KEY<"u"?__APPLICATION_CONTEXT_KEY:(await this.status.waitInjected(),globalThis[Oe])}getAppDefinitionId(){return this.applicationContext.appDefinitionId}getBindings(){return this.applicationContext}getEvents(){return this.events}getEnvironmentContext(){return this.environment}getPrivateAPI(){return this.environment.getPrivateAPI()}getPrivateApplicationAPI(){const t=this.getAppDefinitionId();if(!t)throw ye(pe.IncorrectEnvironment,"appDefinitionId is not available");return this.environment.getApplicationAPIs()[t]}};h(Le,"status",new Vt("application"));let k=Le;const Fe=e=>`"editor-platform-transport": ${e}`,Qt=e=>Fe(`[Internal Error] ${e}`),Zt="ƒ",ea="∂",ta="_get_",aa="_set_",$e="+",Ut="-",wt="·",It="×",At="°",ia=e=>e[0]===It?"":e,Mt=e=>e===null||typeof e>"u"||typeof e=="symbol"||typeof e=="number"||typeof e=="boolean"||typeof e=="function"||typeof e=="string",mn=e=>!!e&&typeof e=="object"&&!Array.isArray(e)&&!(e instanceof Date)&&!(e instanceof Set)&&!(e instanceof Map),un=e=>ne(e.split(wt)),ne=e=>e.map(ia).filter(Boolean).join(".");function Xe(e,t){return{marker:e,...t}}const hn=Xe("A",{shouldUse:e=>Array.isArray(e),serialize:(e,t)=>{e.length?e.forEach((a,i)=>{t(`${i}`,a)}):t("",At)},deserialize:{create:()=>[],has:(e,t)=>!(typeof e[t]>"u"),append:(e,t,a)=>{e.push(a)}}}),fn=Xe("M",{shouldUse:e=>e instanceof Map,serialize:(e,t)=>{e.forEach((a,i)=>{t(i,a)})},deserialize:{create:()=>new Map,has:(e,t)=>e.has(t),append:(e,t,a)=>{e.set(t,a)}}}),gn=Xe("S",{shouldUse:e=>e instanceof Set,serialize:(e,t)=>{let a=0;e.forEach(i=>{t(`${a++}`,i)})},deserialize:{create:()=>new Set,has:(e,t)=>e.has(t),append:(e,t,a)=>{e.add(a)}}}),ht=Xe("O",{shouldUse:e=>typeof e=="object",serialize:(e,t)=>{const a=i=>{const n=Reflect.ownKeys(i).filter(o=>o!=="constructor").filter(o=>typeof o!="symbol");n.length?n.filter(o=>o!=="constructor").filter(o=>typeof o!="symbol").forEach(o=>{const l=Reflect.get(e,o);t(o,l)}):t("",At);const s=Reflect.getPrototypeOf(i);!s||s!=null&&s.hasOwnProperty("__proto__")||a(s)};a(e)},deserialize:{create:()=>({}),has:(e,t)=>!!e[t],append:(e,t,a)=>{e[t]=a}}}),ra=[hn,gn,fn];function vn(e,t){let a=e;for(;a;){const i=Object.getOwnPropertyDescriptor(a,t);if(i)return i;a=Reflect.getPrototypeOf(a)}return null}function Pn(e,t){const a=new WeakMap,i=n=>{const s=n.slice(1).map(ia).filter(Boolean);return s.slice(1).reduce((o,l)=>({context:o.context[o.pointer],pointer:l}),{context:e,pointer:s[0]})},r=(n,s=[])=>{var l;if(a.has(n)&&((l=a.get(n))==null?void 0:l.some(p=>s.join(".").startsWith(p)))){t(s,{...i(s),value:"[Circular]"});return}if(n&&!Mt(n)&&(a.has(n)&&a.set(n,[]),a.set(n,[...a.get(n)??[],s.join(".")])),Mt(n)){t(s,{...i(s),value:n});return}const o=ra.find(c=>c.shouldUse(n))??ht;if(o){o.serialize(n,(c,p)=>{r(p,[...s,`${It}${o.marker}`,c])});return}};return r(e)}const yn=(e,t)=>{if(!mn(e))throw new Error(Fe("only objects are serializable at the root level"));const a={data:[]},i=(n,s)=>{a.data.push([n,s])},r=(n,s)=>{t(un(n),(...o)=>s.context[s.pointer](...o)),i(n,Zt)};return Pn(e,(n,{value:s,context:o,pointer:l})=>{const c=n.slice(1).join(wt),p=vn(o,l);if(p!=null&&p.get||p!=null&&p.set){p!=null&&p.get&&t(ne([...n,ta]),()=>o[l]),p!=null&&p.set&&t(ne([...n,aa]),g=>{o[l]=g});const u=[p!=null&&p.get?$e:Ut,p!=null&&p.set?$e:Ut];i(c,`${ea}${u.join("")}`)}else typeof s=="function"?r(c,{context:o,pointer:l}):i(c,s)}),a},xn=(e,t)=>typeof e!="object"||e===null?e:e.data.reduce((a,[i,r])=>{let n=a;const s=i.split(wt);let o=ht,l=null;for(let c=0;c<s.length;c++){const p=s[c];if(p[0]===It){const u=o.deserialize.has(n,l);if(o=[ht,...ra].find(g=>g.marker===p[1]),!o)throw new Error(Fe(`unknown marker "${p[1]}"`));u||(n[l]=o.deserialize.create()),n=n[l]}else l=p}if((r==null?void 0:r.toString())===At)return a;if((r==null?void 0:r.toString())===Zt)o.deserialize.append(n,l,t(ne(s)));else if((r==null?void 0:r.toString()[0])===ea){const c=(r==null?void 0:r.toString()[1])===$e,p=(r==null?void 0:r.toString()[2])===$e,u={};if(c){const g=t(ne([...s,ta]));u.get=()=>g()}p&&(u.set=t(ne([...s,aa]))),Object.defineProperty(n,l,u)}else o.deserialize.append(n,l,r);return a},{[Symbol("transferred object")]:`${(JSON.stringify(e.data).length/1024).toFixed(2)}Kb`});function na(){const e=globalThis.performance;if(e&&e.now)return e.now();let t="";const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=a.length;let r=0;const n=10;for(;r<n;)t+=a.charAt(Math.floor(Math.random()*i)),r+=1;return t}var Pe=(e=>(e.ExposeAPI="ExposeAPI",e.Call="Call",e.Response="Response",e.Cleanup="Cleanup",e))(Pe||{});class G{constructor(t,a){h(this,"correlationId",`M-${na()}`);h(this,"parentCorrelationId");this.type=t,this.payload=a}withParentCorrelationId(t){return this.parentCorrelationId=t,this}serialize(t){return JSON.stringify({parentCorrelationId:this.parentCorrelationId,correlationId:this.correlationId,type:this.type,payload:yn(this.payload,(a,i)=>{t(this.correlationId,a,i)})})}static fromEvent(t,a){const i=JSON.parse(t);return new G(i.type,xn(i.payload,r=>a(i.correlationId,r))).withParentCorrelationId(i.correlationId)}}class wn extends G{constructor(t){super("Cleanup",t)}}class In extends G{constructor(t){super("Response",t)}}class Lt extends G{constructor(t){super("Response",t)}}class An extends G{constructor(t){super("Call",t)}}const Qe=(e,t)=>`${e}_${t}`;var qe,We,oe,W;class En{constructor(t){P(this,qe,new FinalizationRegistry(t=>{this.postMessage(new wn(t))}));P(this,We,{[Pe.Cleanup]:t=>{const a=t.payload.functionMarkerKey,i=t.payload.callId;delete d(this,oe)[a],i&&delete d(this,W)[i]},[Pe.Response]:async t=>{var r,n,s;const a=t.payload.callId,i=t.payload.errorMessage;if(i)if(t.payload.errorStack){const l=new Error(i);l.stack=t.payload.errorStack,(r=d(this,W)[a])==null||r.reject(l)}else(n=d(this,W)[a])==null||n.reject(i);else{const o=t.payload.response;(s=d(this,W)[a])==null||s.resolve(o)}delete d(this,W)[a]},[Pe.Call]:async t=>{const a=t.payload.functionMarkerKey,i=d(this,oe)[a];if(!i){this.postMessage(new Lt({callId:t.payload.callId,errorMessage:Fe("function is not available")}));return}try{const r=await i.value(...t.payload.props??[]);this.postMessage(new In({callId:t.payload.callId,response:r}))}catch(r){this.postMessage(new Lt({callId:t.payload.callId,errorMessage:r.message,errorStack:r.stack}))}}});P(this,oe,{});P(this,W,{});h(this,"queue",[]);this.port=t,this.port.onmessage=a=>{this.onMessage(a)}}onMessage(t){var i,r,n,s;const a=G.fromEvent(t.data,(o,l)=>{const c=this.replaceTransferredFunction(o,l);return d(this,qe).register(c,{functionMarkerKey:Qe(o,l)}),c});(r=(i=d(this,We))[a.type])==null||r.call(i,a),(s=(n=this.messageEvents)[a.type])==null||s.call(n,a)}postMessage(t){this.port.postMessage(t.serialize(this.registerTransferredFunction.bind(this)))}registerTransferredFunction(t,a,i){const r=Qe(t,a);d(this,oe)[r]={path:a,value:i}}replaceTransferredFunction(t,a){return(...i)=>{const r=`CALL-${crypto.randomUUID()}`;return this.postMessage(new An({callId:r,functionMarkerKey:Qe(t,a),props:i})),new Promise((n,s)=>{d(this,W)[r]={resolve:n,reject:s}})}}flush(){this.queue.forEach(t=>{this.postMessage(t)}),this.queue=[]}}qe=new WeakMap,We=new WeakMap,oe=new WeakMap,W=new WeakMap;class oa extends En{constructor(){super(...arguments);h(this,"messageEvents",{})}expose(a){if(!a.type)throw new Error(Fe('wrong exposed API instance, "type" property is required'));this.queue.push(new G(Pe.ExposeAPI,a)),this.flush()}}var fe=(e=>(e.Ping="EDITOR_PLATFORM_TRANSPORT_EVENT:__Ping",e.RequestPort="EDITOR_PLATFORM_TRANSPORT_EVENT:__RequestPort",e.Pong="EDITOR_PLATFORM_TRANSPORT_EVENT:__Pong",e.Port="EDITOR_PLATFORM_TRANSPORT_EVENT:__Port",e))(fe||{}),se,K,ke,sa;class _n{constructor(t,a){P(this,ke);P(this,se,new Set);P(this,K);this.postMessage=t,this.onMessage=a}setActivePort(t){this.dispose(),q(this,K,t),b(this,ke,sa).call(this)}dispose(){d(this,K)&&(d(this,K).close(),d(this,K).onmessage=null)}onHandshake(t){return d(this,se).add(t),()=>{d(this,se).delete(t)}}}se=new WeakMap,K=new WeakMap,ke=new WeakSet,sa=function(){const t=d(this,K);if(!t){console.warn(Qt("port is required no notify onHandshake listeners"));return}d(this,se).forEach(a=>a(t))};var xe,we,B,ca,pa,da;class la extends _n{constructor(a,i){super(a,i);P(this,B);P(this,xe,!1);P(this,we,`consumer-${na()}`);b(this,B,ca).call(this);const r={type:fe.Ping};a(JSON.stringify(r))}}xe=new WeakMap,we=new WeakMap,B=new WeakSet,ca=function(){this.onMessage(a=>{var i;try{const r=JSON.parse(a.data);switch(r.type){case fe.Pong:{b(this,B,pa).call(this);break}case fe.Port:{b(this,B,da).call(this,r.targetMemberId,(i=a.ports)==null?void 0:i[0]);break}}}catch{}})},pa=function(){if(d(this,xe))return;q(this,xe,!0);const a={type:fe.RequestPort,memberId:d(this,we)};this.postMessage(JSON.stringify(a))},da=function(a,i){if(a===d(this,we)){if(!i)throw new Error(Qt("no port at consumer handshake"));this.setActivePort(i)}};class ma{get onConnect(){return this.handshake.onHandshake.bind(this.handshake)}}class Et extends ma{constructor(){super(...arguments);h(this,"handshake",new la(a=>{globalThis.parent.postMessage(a,"*")},a=>{globalThis.addEventListener("message",a)}))}static exposeAPI(a){new Et().onConnect(r=>{new oa(r).expose(a)})}}class _t extends ma{constructor(){super(...arguments);h(this,"handshake",new la(a=>{globalThis.postMessage(a)},a=>{globalThis.addEventListener("message",a)}))}static exposeAPI(a){new _t().onConnect(r=>{new oa(r).expose(a)})}}class ua{constructor(t){this.platformAppEvents=t}notify(t){switch(t.type){case Xt.EditorReady:this.platformAppEvents.notify({...t,type:H.EditorReady});break;case yt.HostEvent:this.platformAppEvents.notify({...t,type:H.HostEvent});break}}subscribe(t){this.platformAppEvents.subscribe(a=>{t(a)})}}var Dt=(e=>(e.Frame="PLATFORM_FRAME_API",e.Worker="PLATFORM_WORKER_API",e))(Dt||{});class ha{constructor(t,a){this.type=t,this.envType=a}async injectEnvironmentContext({events:t,privateApi:a}){await de.inject({environment:this.envType,events:t,privateApi:a,applicationAPIs:{}})}async injectApplicationContext({appDefinitionId:t}){await k.inject({appDefinitionId:t,appDefinitionName:""})}}const Dn={classic:"https://www.unpkg.com/@wix/design-system/dist/statics/tokens-default.global.css",studio:"https://www.unpkg.com/@wix/design-system/dist/statics/tokens-studio.global.css"};var Ie,Ae,je,Ee,Ke,fa;class Tn extends ha{constructor(){super(Dt.Frame,xt.Frame);P(this,Ke);P(this,Ie,new re);P(this,Ae,new ua(d(this,Ie)));P(this,je);P(this,Ee);b(this,Ke,fa).call(this)}async initEnvironment(a){const{applicationPrivateAPI:i,privateAPI:r,appDefinitionId:n}=a;q(this,Ee,i),q(this,je,r),await this.injectEnvironmentContext({privateApi:r,events:d(this,Ie),applicationAPIs:{[n]:d(this,Ee)}}),await this.injectApplicationContext({appDefinitionId:n})}notify(a){d(this,Ae).notify(a)}subscribe(a){d(this,Ae).subscribe(a)}}Ie=new WeakMap,Ae=new WeakMap,je=new WeakMap,Ee=new WeakMap,Ke=new WeakSet,fa=function(){var a,i,r;if(typeof((i=(a=globalThis==null?void 0:globalThis.document)==null?void 0:a.head)==null?void 0:i.prepend)=="function"){const s=new URL(globalThis.location.href).searchParams.get("editorType")==="CLASSIC"?"classic":"studio",o=Dn[s],l=o&&!!((r=document.querySelectorAll(`link[type="text/css"][href="${o}"]`))!=null&&r.length);if(o&&!l){const c=document.createElement("link");c.setAttribute("rel","stylesheet"),c.setAttribute("type","text/css"),c.setAttribute("href",o),globalThis.document.head.prepend(c)}}};var j=(e=>(e.ApplicationLoadError="ApplicationLoadError",e.ApplicationFetchError="ApplicationFetchError",e.ApplicationExecuteError="ApplicationExecuteError",e))(j||{});class bn extends Q{constructor(a,i){super(a,i,"EP Application Container Error");h(this,"state",{})}withUrl(a){return this.state={...this.state,url:a},this}withAppDefinitionId(a){return this.state={...this.state,appDefinitionId:a},this}withApiMethod(a){return this.state={...this.state,apiMethod:a},this}withApiType(a){return this.state={...this.state,apiType:a},this}}const z=Je(bn),Sn="__APPLICATION_REGISTRY_KEY";async function Fn(e,t,a){const i=new Function(Oe,Sn,a);let r;const n=s=>{if(r)throw z(j.ApplicationExecuteError,"Application registry called more than once").withAppDefinitionId(t.appDefinitionId);if(s.type!==t.type)throw z(j.ApplicationExecuteError,"Application has different type").withMessage("expected type",t.type).withMessage("received type",s.type);r=s};try{const s={...t};i.call(null,new k(s,await de.getInstance()),n)}catch(s){throw z(j.ApplicationExecuteError,s.message).withAppDefinitionId(t.appDefinitionId).withParentError(s)}return new Promise((s,o)=>{const l=e.subscribe(c=>{const p=setTimeout(()=>{clearTimeout(p),l(),r||o(z(j.ApplicationExecuteError,"Application registry was not called, threw by timeout").withAppDefinitionId(t.appDefinitionId))},5e3);c.type===H.ApplicationInit&&c.meta.appDefinitionId===t.appDefinitionId&&(clearTimeout(p),l(),r||o(z(j.ApplicationExecuteError,"Application registry was not called").withAppDefinitionId(t.appDefinitionId)),s({instance:r}))})})}var X,_e,S;class Rn{constructor(t,a){P(this,X,{});P(this,_e);P(this,S);q(this,_e,t),q(this,S,a),d(this,S).subscribe(i=>{switch(i.type){case H.HostEvent:{i.payload.type===he.EventType.removeAppCompleted&&d(this,S).withEvent(d(this,S).factories.createApplicationRemovedEvent(i.payload.appDefinitionId),()=>this.removeApplication(i.payload.appDefinitionId));break}}})}async runApplication(t){const a=await this.loadApplication(t),i=await this.executeApplication(t,a);return this.setApplication(t.appDefinitionId,i),i}setApplication(t,a){var i;d(this,X)[t]=a,d(this,S).withEvent(d(this,S).factories.createApplicationApiInitEvent(t,(i=a==null?void 0:a.api)!=null&&i.private?"private":"public"),()=>{d(this,_e).applicationManager.setApplication(a)})}getApplication(t){return d(this,X)[t]}getAppDefinitionIds(){return Object.keys(d(this,X))}removeApplication(t){delete d(this,X)[t]}async loadApplication(t){const a=t.url;return d(this,S).withEvent(d(this,S).factories.createApplicationLoadEvent(t,a),async()=>{try{return await this.loadApplicationBundle(a)}catch(i){throw z(j.ApplicationLoadError).withUrl(a).withAppDefinitionId(t.appDefinitionId).withParentError(i)}})}async loadApplicationBundle(t){const a=await fetch(t,{method:"GET"});if(!(a.status>=200&&a.status<=299))throw z(j.ApplicationFetchError).withUrl(t);return a.text()}async executeApplication(t,a){return d(this,S).withEvent(d(this,S).factories.createApplicationExecuteEvent(t,t.url),async()=>{const{instance:i}=await Fn(d(this,S),t,a);return i})}}X=new WeakMap,_e=new WeakMap,S=new WeakMap;var le,De,Te,V,be;class On extends ha{constructor(){super(Dt.Worker,xt.Worker);P(this,le,new re);P(this,De,new ua(d(this,le)));P(this,Te,null);P(this,V);P(this,be,[])}create(){}async initEnvironment(a){const{buildPrivateAPI:i}=a;q(this,V,await i({type:"EDITOR_ADDON"})),await this.injectEnvironmentContext({events:d(this,le),privateApi:d(this,V),applicationAPIs:{}}),q(this,Te,new Rn(d(this,V),d(this,le))),d(this,be).forEach(r=>r(this))}async notify(a){await this.waitReady(),d(this,De).notify(a)}subscribe(a){d(this,De).subscribe(a)}async runApplication(a){await this.waitReady(),await d(this,Te).runApplication(a)}waitReady(){return new Promise(a=>{if(d(this,V))return a(this);d(this,be).push(a)})}}le=new WeakMap,De=new WeakMap,Te=new WeakMap,V=new WeakMap,be=new WeakMap;const Ze="$_EP_TRANSPORT_ENV_CONTEXT_GUARD";var me,ga,va;class Cn{constructor(){P(this,me)}isEnvironmentApiExposed(){return!!globalThis[Ze]}async getContexts(){const[t,a]=await Promise.all([de.getInstance(),k.getInstance()]);return{environmentContext:t,applicationContext:a}}expose(){if(this.isEnvironmentApiExposed())return;const t=typeof importScripts=="function",a=globalThis.self&&globalThis.top&&globalThis.self!==globalThis.top;t?(b(this,me,ga).call(this),globalThis[Ze]=!0):a&&(b(this,me,va).call(this),globalThis[Ze]=!0)}}me=new WeakSet,ga=function(){_t.exposeAPI(new On)},va=function(){Et.exposeAPI(new Tn)};function Nn(e){return qa({__type:"host",create:t=>Object.entries(e).reduce((a,[i,r])=>({...a,[i]:r(t)}),{})},Object.keys(e))}new Cn().expose();class $n extends Q{constructor(a,i){super(a,i,"Auth Strategy Error");h(this,"state",{})}withAppDefinitionId(a){return this.state={...this.state,appDefinitionId:a},this}}const qt=Je($n);function Un(e,t){const a=Date.now(),i=e?new Date(e).getTime():null;return i&&i-a>t}const Mn=30*60*1e3,Ln=()=>{let e;return{getAuthHeaders:async()=>{const t=await k.getInstance(),a=t.getBindings(),i=t.getPrivateAPI();if(!a.appDefinitionId)throw qt("EmptyAppDefinitionId");return(!e||Un(e.expires,Mn))&&(e=await i.auth.getAccessToken(a.appDefinitionId,await i.info.getMetaSiteId())),e!=null&&e.token?{headers:{Authorization:e.token}}:(console.error(qt("EmptyAppAuthInstance").withAppDefinitionId(a.appDefinitionId)),{headers:{Authorization:""}})}}};class ee{constructor(t,a){this.namespace=t,this.shapeConstructor=a}build(){const t=new this.shapeConstructor,i=Object.getOwnPropertyNames(Object.getPrototypeOf(t)).filter(r=>r!=="constructor"&&typeof t[r]=="function").reduce((r,n)=>({...r,[n]:s=>{if(s!=null&&s.applicationContext){const o=t.withApplicationContext(s.applicationContext);return o[n].bind(o)}else return t[n].bind(t)}}),{});return Nn(i)}}class te{constructor(t=null){this.overrideApplicationContext=t}getApplicationContext(){return this.overrideApplicationContext?this.overrideApplicationContext:k.getInstance()}async getEnvironmentContext(){return(await this.getApplicationContext()).getEnvironmentContext()}async getPlatformPrivateAPI(){return(await this.getApplicationContext()).getPrivateAPI()}async getContextBindings(){return(await this.getApplicationContext()).getBindings()}withApplicationContext(t){return new this.constructor(t)}}class qn extends te{async getPrivateAPI(){return(await this.getApplicationContext()).getPrivateApplicationAPI()}async getPublicAPI(t){return(await this.getPlatformPrivateAPI()).applicationManager.getPublicApplicationAPI(t)}async getAppInstance(){const t=await this.getPlatformPrivateAPI(),a=await this.getContextBindings();return t.info.getAppInstance(a.appDefinitionId)}}new ee("application",qn).build();class Pa extends te{async addEventListener(t,a){return(await this.getApplicationContext()).getEvents().addEventListener(t,a)}}new ee("events",Pa).build();var He;class Wn extends te{constructor(){super(...arguments);P(this,He,new Pa(this.getApplicationContext()))}async getSelection(){const a=await this.getPlatformPrivateAPI(),i=await a.components.getSelectedComponents();return Promise.all(i.map(r=>a.components.getComponent(r)))}onSelectionChange(a){d(this,He).addEventListener("componentSelectionChanged",i=>{a(i.components)})}}He=new WeakMap;var kn=new ee("elements",Wn).build();class jn extends te{async getViewMode(){return(await this.getPlatformPrivateAPI()).info.getViewMode()}async getLanguageCode(){return(await this.getPlatformPrivateAPI()).info.getLanguageCode()}}new ee("info",jn).build();var ft=(e=>(e.UndefinedCompRef="UndefinedCompRef",e.NotAvailableMethod="NotAvailableMethod",e))(ft||{});class Kn extends Q{constructor(t,a){super(t,a,"Widget Error")}}const Wt=Je(Kn),ya="underline";function Hn(e){return e.map(t=>xa({font:t}))}function xa(e){var a;const t={family:void 0,size:void 0};if(e!=null&&e.font){const{variableName:i,fallbackValue:r}=Bn(e.font);t.cssVariableName=i;const n=r.match(/(?:(["']).*?\1|\S)+/g)||[];for(let s=0;s<n.length;s++){const o=n[s];switch(o){case"bold":t.bold=!0;break;case"italic":t.italic=!0;break;default:o!=null&&o.endsWith("px")?t.size=parseInt(o,10):s===n.length-1?t.family=o:t.family=(t.family||"")+" "+o}}}return e!=null&&e.textDecoration&&(t.underline=e.textDecoration===ya),t.family=(a=t.family)==null?void 0:a.trim().replace(/['"]+/g,""),t}function Bn(e){var i;const t=e.trim(),a=t.match(/var\((--[\w-]+),\s*(.+)\)/);return a?{variableName:a[1],fallbackValue:((i=a[2])==null?void 0:i.trim())??""}:{variableName:void 0,fallbackValue:t}}var ce,Ce;class Gn extends te{constructor(){super(...arguments);P(this,ce)}async getProp(a){const i=await this.getPlatformPrivateAPI(),r=await b(this,ce,Ce).call(this);if(await i.refComponents.isRefComponent(r)){const n=await i.refComponents.getProps(r);return n==null?void 0:n[a]}else return i.customElement.getAttribute(r,a)}async setProp(a,i){const r=await this.getPlatformPrivateAPI(),n=await b(this,ce,Ce).call(this);await r.refComponents.isRefComponent(n)?await r.refComponents.setProps(n,{[a]:i}):await r.customElement.setAttribute(n,a,i)}async setPreloadFonts(a){const i=await this.getPlatformPrivateAPI(),r=await b(this,ce,Ce).call(this);if(await i.refComponents.isRefComponent(r))throw Wt(ft.NotAvailableMethod,"not available for the current component type");const n=Hn(a);await i.customElement.setPreloadFonts(r,n)}}ce=new WeakSet,Ce=async function(){const r=(await(await this.getPlatformPrivateAPI()).components.getSelectedComponents())[0];if(!r)throw Wt(ft.UndefinedCompRef);return r};const zn=new ee("widget",Gn);zn.build();function Jn(e){var t;return`${e.cssVariableName?`var(${e.cssVariableName}, `:""}${e.italic?"italic ":""}${e.bold?"bold ":""}${e.size||16}px ${((t=e.family)==null?void 0:t.split(",").map(a=>`"${a.replace(/['"]+/g,"")}"`).join(","))||"serif"}${e.cssVariableName?")":""}`}function Xn(e){if(!e)return null;const t=e,a=t.match(/var\((--[\w-]+),\s*(.+)\)/);return a?{cssVariableName:a[1],color:a[2]}:{color:t}}function kt(e){return e?e.cssVariableName?`var(${e.cssVariableName}, ${e.color})`:e.color:""}const Vn={transformFontInternalValue:e=>{if(e){const{theme:t,cssVariableName:a,bold:i,italic:r,underline:n,...s}=e;return{...s,style:{bold:i,italic:r,underline:n},editorKey:a||t||""}}else return{editorKey:"font_7",family:"helvetica-w01-roman",size:16,style:{}}}};class Yn extends te{async selectColor(t,a){const i=await this.getPlatformPrivateAPI();let r=Xn(t),n=kt(r);return await i.inputs.openColorPicker({color:(r==null?void 0:r.cssVariableName)||(r==null?void 0:r.theme)||(r==null?void 0:r.color)},({color:s,theme:o,cssVariableTheme:l})=>{var c;r={color:s,theme:o,cssVariableName:l},n=kt(r),(c=a==null?void 0:a.onChange)==null||c.call(a,n)}),n}async selectFont(t,a){const i=await this.getPlatformPrivateAPI(),r=xa(t);let n=t;return await i.inputs.openFontPickerV2({...a,panelSectionsDefinition:{htmlTag:"hidden"},componentStyle:Vn.transformFontInternalValue(r)},(s,o)=>{var l;n={font:Jn(s),textDecoration:s.underline?ya:void 0},(l=a==null?void 0:a.onChange)==null||l.call(a,n)}),n}}new ee("inputs",Yn).build();class Qn extends te{async getData(){return(await this.getPlatformPrivateAPI()).externalPanels.getData()}async setData(t){return(await this.getPlatformPrivateAPI()).externalPanels.setData(t)}async getStyle(){return(await this.getPlatformPrivateAPI()).externalPanels.getStyle()}async setStyle(t){return(await this.getPlatformPrivateAPI()).externalPanels.setStyle(t)}async getTheme(){return(await this.getPlatformPrivateAPI()).externalPanels.getTheme()}async selectMedia(){return(await this.getPlatformPrivateAPI()).externalPanels.selectMedia()}async selectLink(...t){return(await this.getPlatformPrivateAPI()).externalPanels.selectLink(...t)}async selectColor(...t){return async()=>(await this.getPlatformPrivateAPI()).externalPanels.selectColor(...t)}async translate(t,a){return(await this.getPlatformPrivateAPI()).externalPanels.translate(t,a)}}new ee("externalPanels",Qn).build();const Zn=()=>{const e=new URLSearchParams(window.location.search);return{environment:{},applicationContext:k.getInstance(),channel:{observeState:async()=>({disconnect(){}})},essentials:e.has("essentials")?JSON.parse(e.get("essentials")):{}}},eo=()=>({environment:{},applicationContext:k.getInstance(),channel:{observeState:async()=>({disconnect(){}})}}),jt={host:()=>typeof importScripts=="function"?eo():Zn(),auth:Ln},Kt=Ja({modules:{files:en,elements:kn},host:jt.host(),auth:jt.auth()}),wa=document.querySelector(".icons-container"),to=document.querySelector(".add-button"),Ht=document.querySelector(".status");wa.innerHTML=`
  <span class="material-symbols-outlined search">search</span>
  <span class="material-symbols-outlined home">home</span>
  <span class="material-symbols-outlined settings">settings</span>
`;let gt="";to.addEventListener("click",async()=>{try{const[e]=await Kt.elements.getSelection();if(console.log("selected element: ",e),e.type!=="image")return;Ht.innerText="Loading image to the Media Gallery, please wait...";const t="png",a="image/png",i=`${gt}.${t}`,{uploadUrl:r}=await Kt.files.generateFileUploadUrl(a,{filePath:"images",fileName:i});console.log("upload url: ",r);const n={filename:`${i}`},s=new URLSearchParams(n).toString(),l=await(await fetch(`assets/${i}`)).blob(),c=await fetch(`${r}?${s}`,{method:"PUT",headers:{"Content-Type":a},body:l}),{file:p}=await c.json();await e.setProp("src",p.url),Ht.innerText=""}catch(e){console.log({error:e})}});wa.addEventListener("click",e=>{const t=e.target;t.className!=="icons-container"&&(gt=t.innerText,document.querySelector(".selected-icon").innerText=gt)});
